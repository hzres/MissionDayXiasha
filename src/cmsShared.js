function galleryExistsOnPage(){var $gall=$("#gallery-container, #pulling-gallery");return $gall.length>0&&$gall.parents("#splash-container").length>0}function socialInboxPageDocumentReady(){}function zeroFill(number,width){return width-=number.toString().length,width>0?new Array(width+(/\./.test(number)?2:1)).join("0")+number:number}function eventSiteDocumentReady(){var $body=$("body"),$document=$(document),$window=$(window),$mainCanvas=$("#main-canvas"),$splashContainer=$("#splash-container"),$rsvpModal=$("#rsvp-modal"),$rsvpFormInner=$("#rsvp-form-inner"),$footer=$("#footer"),hash=window.location.hash;if(hash.length>1&&void 0===splash.server._user.id){hash=hash.substring(1);var url=document.location.protocol+"//"+splash.server.constants.ocbDomain+"/hashlogin?redirect=";url+=encodeURIComponent(document.location.protocol+"//"+splash.server._event.domain.edit+"#"+hash),_.each(splash.finetuneRoutes,function(func,hashMatch){new RegExp(hashMatch.replace(")","){0,1}").replace(/:[a-z]+/,"([a-z]+)")).exec(hash)&&(window.location=url)})}window.windowHeight=$window.height();var isMobile=/iPhone|iPod|iPad|Android|BlackBerry/.test(navigator.userAgent);if(1==isMobile&&$body.addClass("isMobile"),$body.hasClass("finetune")||0!==$("#gallery-thumbs").find(".photo-thumb").length||1!==$(".element-gallery").length||$(".element-gallery").remove(),$body.removeClass("loading"),1==isMobile){$("#simple-modal-wrap").find(".simple-modal-flow-control").css("min-height",windowHeight+"px");var modalHeight=$rsvpModal.outerHeight();if(windowHeight>modalHeight+30){var thisOffset=(windowHeight-modalHeight)/2;$rsvpModal.addClass("isShort").css("top",thisOffset+"px")}}$footer.on("click","#footerCalendarBtn",function(){var $footerCalendarBtn=$(this);$footerCalendarBtn.hasClass("active")?$footerCalendarBtn.add($("#footerCalendarLinksWrap")).removeClass("active"):($footerCalendarBtn.add($("#footerCalendarLinksWrap")).addClass("active"),$.browser.android&&$footerCalendarBtn.find(".gmail-link").addClass("is-hidden"))}),resizeSplashContainer();var navPos,$navWrap=$mainCanvas.find(".navWrap:first");void 0!==$navWrap&&void 0!==$navWrap.position()&&null!==$navWrap.position()&&(navPos=$navWrap.position().top),void 0!==navPos&&!1!==navPos&&$window.scroll(debounce(function(){$(this).scrollTop()>navPos?$navWrap.addClass("fixed"):$navWrap.removeClass("fixed")}),100),void 0===navPos||!1===navPos||$("body").hasClass("finetune")||$mainCanvas.find(".nav-item").click(function(){return $(this).find("a.nav-jump").click(),!1}),$("#ticketForm").on("click",".more-info",function(){$desc=$(this).siblings(".description"),$desc.hasClass("hide")?$desc.removeClass("hide"):$desc.addClass("hide")}),$document.on("click","#sectionNav a",function(event){event.preventDefault();var section=$.trim($(this).attr("href").replace("#","")),$chunk=$("#section-"+section);$chunk.length&&$("html, body").stop().animate({scrollTop:$chunk.offset().top-20},1e3,"easeInOutExpo")}),$document.on("click","a.add-cal",function(e){ga("splash.send","event","Splash","CalendarOpen","id:"+splash.server.constants.event_id),e.preventDefault(),$(this).parents("div:first").find(".the-cals").removeClass("hide"),$("#add-cal-wrap").addClass("addingToCal")}),$("div.private h3").click(function(){$("input[name='access_code']").focus()});$rsvpFormInner.on("click","#add-message",function(event){ga("splash.send","event","Splash","RSVPAddMessage","id:"+splash.server.constants.event_id),event.preventDefault(),$(this).hide(),$("#rsvp-message").removeClass("hide").focus().width()}),$rsvpFormInner.on("keyup",".form-field",function(e){if(13==e.which){var $this=$(this);if(!$this.hasClass("textarea")){if($this.parent().hasClass("radio")&&($this.click(),$this.hasClass("attending-toggle")))return splash.pageAction.submitRsvpForm(),!1;var $n=$this.next(".form-field");if($n.length>0)$n.focus();else{var input_index=1*$this.index(),next=input_index,$next_input=$rsvpFormInner.find(".form-field:eq("+next+")");$next_input.length>0?$next_input.focus():(next=input_index+1,($next_input=$rsvpFormInner.find(".form-field:eq("+next+")")).length>0&&$next_input.focus())}}}}),$rsvpFormInner.on("change",".date-select",function(){var $this=$(this),$parent=$this.parents(".date-holder");if($this.hasClass("month"))$.inArray($this.val(),["02","04","06","09","11"])>-1?($parent.find(".day:first").find(".option[value='29'],.option[value='30'],.option[value='31']").hide(),"02"==$this.val()?""!=(year=$parent.find(".year").val())&&1==(isLeap=new Date(year,1,29).getMonth())&&$parent.find(".day:first").find(".option[value='29']").show():$parent.find(".day:first").find(".option").show().end().find(".option[value='31']").hide()):$parent.find(".day:first").find(".option").show();else if($this.hasClass("year")){var year=$this.val();if("02"==$parent.find(".month").val()){var isLeap=new Date(year,1,29).getMonth();1==isLeap?$parent.find(".day:first").find(".option[value='29']").show():$parent.find(".day:first").find(".option[value='29']").hide()}}var p={year:$parent.find(".year").val(),month:$parent.find(".month").val(),day:$parent.find(".day").val()};$this.parents(".date-holder").find("input.custom").val(p.year+"-"+p.month+"-"+p.day)}),$("#sendANote, #contactOrgFtr").click(function(event){return event.preventDefault(),openContactOrganizerModal(),!1}),$rsvpModal.on("change","#attendee_count",function(){var attendeeCount=parseInt($(this).val(),10),$guestInfoWraps=$(".guest-info-wrap");$(".guest-info-wrap").addClass("is-hidden");for(var i=0;i<attendeeCount-1;i++)$guestInfoWraps.eq(i).removeClass("is-hidden")}),$rsvpModal.on({click:function(){var $this=$(this);$this.prop("checked")?$this.parents(".options").find("input.other-input-field").fadeIn(300,function(){$(this).focus()}):$this.parents(".options").find("input.other-input-field").val("").hide()}},'input[value="include_other_opt"]'),$rsvpModal.on({click:function(){"include_other_opt"!=$(this).val()&&$(this).parents(".options").find("input.other-input-field").val("").hide()}},".radio input"),$document.on({change:function(){var $this=$(this);1==$this.val()?$this.parents(".options").find("input.other-input-field").fadeIn(300,function(){$(this).focus()}):$this.parents(".options").find("input.other-input-field").val("").hide()}},'input[field="include_other_opt"], input[use-val="include_other_opt"]'),$document.on("change","select, input.dropdown",function(){var $t=$(this),$input=$t.parents(".select-holder:first").find("input.other-input-field");$input.length>0&&("include_other_opt"==$t.val()?$input.fadeIn().focus():$input.hide().val(""))}),$document.on("click",".plus-one-wrap label",function(e){var isChecked="checkbox"===$("#rsvp-plus-1").attr("type")?$("#rsvp-plus-1").is(":checked"):parseInt($("#rsvp-plus-1").val()),$plusOneInputs=$(e.currentTarget).parents(".plus-one-wrap").find("input");isChecked?$plusOneInputs.removeClass("is-hidden"):$plusOneInputs.addClass("is-hidden").val("")}),$document.on("click",".attending-wrap",function(){$(".cantMakeIt").find("input").is(":checked")||($rsvpFormInner.find(".attending-wrap").removeClass("selected"),$(this).addClass("selected"))}),$document.on("change",'input[type="file"]',function(){var filename=$(this).val().replace(/C:\\fakepath\\/i,"");$(this).attr("data-content","Uploaded: "+filename).addClass("uploaded")}),$document.on("click","#rsvp-submit",debounce(function(){splash.pageAction.submitRsvpForm()},100)),galleryInit(),$document.on("click","#afterRsvpMessage .close",function(){closeSimpleModal()}),$document.on("click",".fb-wrap .close",function(){$(this).parents("div.fb-wrap:first").hide()}),$document.on("click",".add-fb-comments",function(e){e.preventDefault();var $li=$(this).parents("div.photo:first"),$myFBWrap=$li.find("div.fb-wrap");return $li.hasClass("commentsOpen")?$li.removeClass("shareOpen commentsOpen shareBoxOpen").css({height:"",marginTop:"auto"}):($myFBWrap.show(),$li.addClass("shareOpen commentsOpen").removeClass("shareBoxOpen").find(".shareBox").remove(),setTimeout(function(){$("div.photos").scrollTop($("div.photos").height())},30)),$myFBWrap.hasClass("jfiedj")||($myFBWrap.addClass("jfiedj"),$myFBWrap.html('<h3>Comment on this photo <span class="right">To mention someone in your comment, put an @ symbol before their name</span></h3><div class="fb-comments" data-href="'+$(this).attr("href")+'" data-num-posts="30" data-width="'+$myFBWrap.width()+'" data-colorscheme="dark"></div><span class="close">&#10006</span>').show(),FB.XFBML.parse(document.getElementById("fb-wrap-"+$(this).attr("im")))),!1}),$("#view-attendees").click(function(){return splash.attendeesV1Modal.openModal(),!1});var closingSimple=!1,closeSimpleWithDelay=function(){$body.removeClass("showSimple"),clearTimeout(closingSimple),closingSimple=setTimeout(function(){closeSimpleModal()},300)};$("#simple-modal-wrap").on("click",function(event){if("none"!==$rsvpModal.css("display")&&$(event.target).hasClass("simple-modal-flow-control"))return event.preventDefault(),"none"!=$("#rsvp-modal").css("display")&&closeSimpleWithDelay(),!1}),$rsvpModal.on("click",".close-form",function(event){return event.preventDefault(),closeSimpleWithDelay(),!1}),$document.on("click",".toggle-shell",function(){$(this).find("span.inner");"off"==$(this).attr("status")?($(this).attr("status","on").find("span.inner").animate({marginLeft:0},{duration:200}),$(this).parents(".toggle-shell-contain").find("input.toggle-hidden-val").val(1).blur()):($(this).attr("status","off").find("span.inner").animate({marginLeft:-82},{duration:200}),$(this).parents(".toggle-shell-contain").find("input.toggle-hidden-val").val(0).blur())}),$document.on("click","#purchase-button",function(){return splash.pageAction.submitTicketForm(),!1});var openTicketCalcTimer;if($document.on({keyup:function(){var $this=$(this);clearTimeout(openTicketCalcTimer);var inc=0;"text"==$this.prop("type")&&(inc=1250),openTicketCalcTimer=setTimeout(function(){openPriceValidationCheck($this)},inc)},blur:function(){var $this=$(this);clearTimeout(openTicketCalcTimer),openTicketCalcTimer=setTimeout(function(){openPriceValidationCheck($this)},0)}},"input.open_price_buy"),$("#contact-event-organizer").on("click","#send-contact-org-note",function(event){event.preventDefault(),ga("splash.send","event","Splash","SendANoteSubmit","id:"+splash.server.constants.event_id);var params={action:"sendANote",name:$("#contact-org-name").val(),note:$.trim($("#contact-org-note").val()),email:$("#contact-org-email").val(),company:$("#contact-org-company").val(),eventid:splash.server.constants.event_id};if(isValidEmail(params.email))if(""===params.note)$("#contact-org-required").text("Please fill out a message to send."),$("#contact-org-note").focus();else{var $this=$(this);$this.text("Sending..."),$.ajax("",{type:"POST",data:params,dataType:"json",success:function(response){void 0!==response.success?($this.text("Sent!"),setTimeout(function(){$this.text("Send Note"),closeSimpleModal()},3e3),$("#contact-org-required").text("")):void 0!==response.error?($("#contact-org-required").html(response.error),$this.text("Send Note")):(alert("There was an error sending your message.  Please try again."),$this.text("Send Note"))},error:function(response){alert("There was an error sending your message.  Please try again."),$this.text("Send Note")}})}else $("#contact-org-required").text("Please enter a valid email address."),$("#contact-org-email").focus()}),void 0!==splash.server.constants.rsvp_form_field_values){var makeReadOnly=!1;79054==splash.server.constants.event_id&&(makeReadOnly=!0);for(var key in splash.server.constants.rsvp_form_field_values){var value=$.trim(splash.server.constants.rsvp_form_field_values[key]);if("first_name"==key||"last_name"==key||"email"==key)($input=splash.pageAction.getReservedInputWithFallback(key)).val(value),makeReadOnly&&""!=value&&$input.attr("readonly","1");else{var num=key.replace("custom_field_",""),$input=$rsvpFormInner.find('input[num="'+num+'"]:first');if(1==$input.length){var type=$input.attr("type")||!1;if("radio"==type||"checkbox"==type){var set=!1;$rsvpFormInner.find('input[num="'+num+'"]').each(function(){var $this=$(this);$this.attr("type")==type&&$this.val()==value?($this.prop("checked",!0),set=!0):$this.removeAttr("checked")}),0==set&&1==($input=$rsvpFormInner.find('input[num="'+num+'"].other-input-field')).length&&($rsvpFormInner.find('input[num="'+num+'",value="include_other_opt"]').prop("checked",!0),$input.val(value))}else if($input.parent().hasClass("nu-checkbox"))if($input.hasClass("multi")){var values=(""+value).split("||"),matchedValues=[];if($rsvpFormInner.find('input[num="'+num+'"]').each(function(){var $t=$(this);-1!==$.inArray($t.attr("value"),values)&&($t.parent().addClass("checked"),matchedValues.push($t.attr("value")))}),values.length!=matchedValues.length&&($otherInput=$rsvpFormInner.find('input.other-input-field[num="'+num+'"]:first'),1==$otherInput.length)){for(var otherValue="",i=0;i<values.length;i++)-1===$.inArray(values[i],matchedValues)&&(""!=otherValue&&(otherValue+=" "),otherValue+=(""+values[i]).replace("Other: ",""));$otherInput.prev(".nu-checkbox:first").addClass("checked"),$otherInput.val(otherValue),$otherInput.show()}}else""!=value&&$input.parent().addClass("checked");else $input.parent().hasClass("nu-dropdown")?(""+value).match(/^Other: /)?(window.flipDropDown($input.parent(),"include_other_opt",!0),$input.parent().siblings("input.other-input-field:first").val((""+value).replace(/^Other: /,"")).blur()):window.flipDropDown($input.parent(),value,!0):"file"===$input.attr("type")||($input[0].value=value);makeReadOnly&&""!=value&&$input.attr("readonly","1")}else 1==($input=$rsvpFormInner.find('textarea[num="'+num+'"]:first')).length?$input.val(value):1==($input=$rsvpFormInner.find('select[num="'+num+'"]:first')).length?($input.val(value),makeReadOnly&&""!=value&&$input.attr("disabled","disabled")):(($input=$('<input id="custom-'+num+'" class="custom optional" num="'+num+'" name="custom_field_'+num+'" type="hidden" />')).val(value),$rsvpFormInner.append($input)),makeReadOnly&&""!=value&&$input.attr("readonly","1")}}}if($("#checkin-password-prompt").length>0&&($("#checkin-password-prompt").fireSimpleModal(),$("#checkin-page-code").keyup(function(e){13==e.keyCode&&$("#checkin-password-save").click()}),$("#checkin-password-save").click(function(){var $this=$(this);if($this.hasClass("in-progress"))return!1;$this.addClass("in-progress").text("Checking..."),$.ajax(splash.server.constants.formBase+"/splash/checkinPassword/"+splash.server.constants.event_id,{type:"POST",data:{code:$("#checkin-page-code").val()},dataType:"json",success:function(response){void 0!==response.success?($("#checkin-password-response").hide(),document.location.reload()):($this.removeClass("in-progress").text("Submit"),$("#checkin-password-response").hide().text("Invalid password").fadeIn())},error:function(){alert("There was an error submitting your data.  Please try again (#102)"),$this.removeClass("in-progress").text("Submit")}})})),$body.hasClass("private")&&($("input.age-input").keyup(function(event){if(13==event.keyCode){if("age-yy"!=$(this).prop("id"))return event.preventDefault(),void $(this).next().focus();$("#access-code-form").submit()}var allowed=[46,8,9,188,37],$this=$(this);$this.val().length==$this.prop("maxlength")&&$.inArray(event.keyCode,allowed)<0&&$(this).next().focus()}),$("#access-code-form").submit(function(){var $code_input=$("#access-code-input"),$age_mm=$("#age-mm"),$age_dd=$("#age-dd");$("#age-yy");if($age_mm.length>0){var match=!1;if(1==$age_mm.val().length&&$age_mm.val("0"+$age_mm.val()),1==$age_dd.val().length&&$age_dd.val("0"+$age_dd.val()),$("input.age-input").each(function(){if($(this).val().length!=$(this).prop("maxlength"))return $("#access-code-error").html("Please enter a valid date of birth.").fadeIn("fast"),$(this).focus(),match=!0,!1}),match)return!1}if($code_input.length&&""==$code_input.val())return $code_input.hasClass("email_access")?$("#access-code-error").html("<br>Please enter your email address to continue.").fadeIn("fast"):$("#access-code-error").html("<br>Please enter the access code to continue.").fadeIn("fast"),$("#access-code-input").focus(),!1})),$splashContainer.on("click","a",function(event){var $clickedLink=$(this);if($clickedLink.hasClass("nav-jump")||$clickedLink.hasClass("button-link")){var allowFinetuneButtonClicks=!1;if(splash&&splash.server&&splash.server.constants&&splash.server.constants.finetuneHovers&&"hide"===splash.server.constants.finetuneHovers&&(allowFinetuneButtonClicks=!0),!splash.server.constants.finetune||allowFinetuneButtonClicks){if("_blank"!=$clickedLink.prop("target")&&"_self"!=$clickedLink.prop("target")){if($clickedLink.parents(".grp:first").hasClass("firstTiny"))return!1;jumpToNavBlock($clickedLink,event)}}else event.preventDefault()}else takeLinkActionToTopLevelFrameIfNeeded($clickedLink,event)}),$body.hasClass("hasVidBG")&&!$body.hasClass("finetune")){var tag=document.createElement("script");tag.src="/js/vidBG.js",tag.id="ytAPIsrc";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag)}if((splash.server.constants.autosize.title||splash.server.constants.autosize.subtitle||splash.server.constants.autosize.rsvp)&&($("#element-title").parents(".layoutGrp:first").removeClass("no-op"),$("#element-subtitle").parents(".layoutGrp:first").removeClass("no-op"),$("#element-rsvp").parents(".layoutGrp:first").removeClass("no-op")),$mainCanvas.find(".carousel").each(function(){$(this).activateCarousel()}),$rsvpModal.on("click",".shareBox .icon",function(e){var type=$(this).parents(".method:first").attr("method");splash.analytics.track("event-shareIconClick",{"share-type":type}),"facebook"==type&&splash.socialActions.fireFacebookShare(),"twitter"==type&&splash.socialActions.fireTweet(),"linkedin"==type&&splash.socialActions.fireLinkedInShare()}),$("#gallery").on("click",".facebookShare",function(){var n=$(this).attr("n");return void 0!==n&&ga("splash.send","event","Splash","PhotoFacebook","id:"+constants.event_id+" n:"+n),splash.socialActions.fireFacebookShare(),!1}),$("#gallery").on("click",".twitterShare",function(){var n=$(this).attr("n");return void 0!==n&&ga("splash.send","event","Splash","PhotoTwitter","id:"+constants.event_id+" n:"+n),splash.socialActions.fireTweet(),!1}),$rsvpModal.on("keyup",".shareBox .method[method=email] input",function(e){13==e.which&&$(this).siblings("a:first").click()}),$rsvpModal.on("click",".shareBox .method[method=email] a",function(e){e.preventDefault();var $this=$(this),$parent=$this.parents(".method");if($this.hasClass("in-progress"))return!1;var $shareBox=$this.parents(".shareBox:first"),$emailS=$shareBox.find("input.share-rsvp-email-input"),email=$emailS.val(),url=$this.attr("share-url");isValidEmail(email)?(ga("splash.send","event","Splash","EmailShareSend","id:"+splash.server.constants.event_id),$emailS.attr("disabled","disabled"),$this.addClass("in-progress").text("Sending..."),$.ajax(splash.server.constants.formBase+"/emailShare",{type:"POST",data:{email:email,url:url},dataType:"json",success:function(response){ga("splash.send","event","Splash","EmailShareSuccess","id:"+splash.server.constants.event_id),$shareBox.find("img.loading").remove(),$emailS.val("").removeAttr("disabled"),$this.removeClass("in-progress").text("Message sent!"),setTimeout(function(){$this.text("Send message"),$parent.find(".icon:first").click()},2500)},error:function(){ga("splash.send","event","Splash","EmailShareSuccess","id:"+splash.server.constants.event_id),$shareBox.find("img.loading").remove(),$this.show(),$emailS.removeAttr("disabled")},timeout:1e4})):(ga("splash.send","event","Splash","EmailShareValidFail","id:"+splash.server.constants.event_id),alert("Please enter a valid Email Address."),$emailS.select())}),$rsvpModal.on("click",".shareBox .method[method=link] a",function(e){ga("splash.send","event","Splash","shareBox-LinkOpen","id:"+splash.server.constants.event_id)}),$rsvpModal.on("click",".shareBox .closeShareBox",function(e){var $this=$(this);ga("splash.send","event","Splash","closeShareBox","id:"+splash.server.constants.event_id);var $shareBox=$this.parents(".shareBox:first");$shareBox.animate({width:"0px"},350,"linear",function(){$shareBox.remove()})}),$rsvpModal.on("click",".shareBox .method .icon",function(e){var $m=$(this).closest(".method"),$p=$m.closest(".shareBox"),clear=$p.hasClass($m.attr("n"))||$m.hasClass("jammed");$p.find(".method").each(function(){$p.removeClass($(this).attr("n"))}),!1===clear?($p.addClass($m.attr("n")),ga("splash.send","event","Splash","shareBox-"+$m.attr("method"),"id:"+splash.server.constants.event_id)):$m.hasClass("jammed")||ga("splash.send","event","Splash","shareBox-clear","id:"+splash.server.constants.event_id)}),$rsvpModal.on("click",".nu-checkbox > a",function(e){return e.preventDefault(),window.open($(this).attr("href"),"_blank"),!1}),navigator.userAgent.match(/Trident\/7\./)){$body.addClass("isIE");var thisVer=(""+$.browser.version).substring(0,2).replace(".","");$body.addClass("v"+thisVer)}else $body.removeClass("isIE");if(splash.server.constants.inlineRsvp&&-1===splash.server.constants.thisTheme.indexOf("st-reset")&&-1!==splash.server.constants.thisTheme.indexOf("st-")){var inlineBgColor=$(".element-rsvp").css("background-color"),inlineTxtColor=$(".element-rsvp").css("color");$("#rsvp-submit").css({"background-color":inlineBgColor,color:inlineTxtColor}),$(".element-rsvp").addClass("inlineForm")}splash.server.constants.openRsvp&&splash.pageAction.showPageActionForm(),$("#rsvp-plus-1").click(function(){$("#guest-name").toggleClass("active")}),$document.on("change",".custom-file-upload",function(){var $input=$(this),uploadImgId=$input.data("customfield-img"),$container=$input.closest(".custom-file-upload-holder");splash.customFileUpload($input,{$container:$container,$hiddenInput:$container.find(".custom-file-upload-url"),$placeholder:$("#customfield-img-"+uploadImgId),uploadImgId:uploadImgId})}),splash.pageAction.bind(),splash.pageAction.detectIframe(),$("#social-main").on("click",".social-btn",function(){$(this).hasClass("twitter")?splash.socialActions.fireTweet():$(this).hasClass("facebook")?splash.socialActions.fireFacebookShare():$(this).hasClass("linkedin")&&splash.socialActions.fireLinkedInShare()}),fixFooter(),checkForNoHeaderStuff(),setTimeout(function(){matchHeight()},10),splash.server.constants.twitter_share_widget&&splash.socialActions.initTwitterShare(),window.location&&"#contact-organizer"===window.location.hash&&openContactOrganizerModal(),$document.on("click",'.social-auth-container[network="facebook"]',function(e){e.preventDefault(),FB.getLoginStatus(function(response){console.log(response),"connected"===response.status?(getFacebookInfo(response.authResponse.signedRequest),removeHighlightColor(),$('.social-auth-container[network="facebook"]').addClass("selected-color")):FB.login(function(response){response.authResponse&&(getFacebookInfo(response.authResponse.signedRequest),removeHighlightColor(),$('.social-auth-container[network="facebook"]').addClass("selected-color"))},{scope:"public_profile, email"})})}),$document.on("click",'.social-auth-container[network="twitter"]',function(e){e.preventDefault();var url=("https:"==document.location.protocol?"https://":"http://")+splash.server.constants.ocbDomain+"/events/remoteAuth/0/twitter/?_callback=twitterAuthed&rsvp=true";$body.hasClass("isMobile")?(url+="&event_url="+encodeURIComponent(window.location.href),window.location.href=url):window.open(url,"TwitterAuth","width=500,height=400")}),$document.on("click",'.social-auth-container[network="linkedin"]',function(e){e.preventDefault();var url=("https:"==document.location.protocol?"https://":"http://")+splash.server.constants.ocbDomain+"/events/remoteAuth/0/linkedin/?_callback=linkedinAuthed";$body.hasClass("isMobile")?(url+="&event_url="+encodeURIComponent(window.location.href),window.location.href=url):window.open(url,"LinkedInAuth","width=540,height=585")}),$document.on("click",'.social-auth-container[network="google_plus"]',function(e){e.preventDefault();var url=("https:"==document.location.protocol?"https://":"http://")+splash.server.constants.ocbDomain+"/events/remoteAuth/0/google_plus/?_callback=googlePlusAuthed";window.open(url,"GooglePlusAuth","width=500,height=580")}),$(".social-auth-fields input.form-field").on("change",function(){$(this).closest("div").removeClass("icon-f-twitter icon-f-facebook-rect icon-f-linkedin-squared icon-f-googleplus-rect")});var photo_id=getParameterByName("pid");if(photo_id>0&&showTheGallery(photo_id),getParameterByName("autoopen")>0&&splash.pageAction.showPageActionForm(),setTimeout(function(){autoFontResize()},0),splash.server.captcha_enabled&&"collect"===splash.server._event.rsvp_method){var captchaModal=splash.captchaFactory({attachTo:".btnWrap",attachMethod:"before",splashGlobal:splash});captchaModal.attachCaptcha().then(function(){$("#rsvp-modal .g-recaptcha").data("captcha-instance",captchaModal)}).catch(function(){})}$(".cms-block-type-content.linked-to-user-name").find(".body").text(splash.cmsUtils.getLoggedInUserDisplayName()),$document.on("click",".urlShare",function(e){e.preventDefault();var $this=$(this);if(0==$this.find("input").length){var $p=$('<input type="text" />');$p.css({width:"171px",fontFamily:"Arial,sans-serif",fontSize:"12px",position:"absolute",right:"108px",top:"52px",background:"#eeeeee",display:"inline-block"}),$p.attr("disabled",!0),$p.val($this.attr("href")),$this.append($p),$p.select()}else $this.find("input").remove();return!1}),$document.on("click","a.backToTop",function(event){return event.preventDefault(),$("html, body").animate({scrollTop:0},300),!1}),$document.on("click","#loadMoreThumbs",function(){checkViewportForThumbsToLoad()}),$document.on("click",".photo-thumb .thumbShare",function(e){ga("splash.send","event","Splash","shareBox-open","id:"+splash.server.constants.event_id),$("div.main").find(".shareBox").each(function(){$(this).animate({width:0},100,"linear",function(){$(this).remove()})});var $thumbDiv=$(this).parents(".photo-thumb:first"),photoId=$thumbDiv.find("img.th").attr("photo-id"),url="http://"+gallVars.domain+"/?i="+photoId,$myShareBox=splash.pageAction.createMyShareBox(url),right=$(window).width()-($thumbDiv.offset().left+$thumbDiv.width()+2),top=$thumbDiv.offset().top+$thumbDiv.height()-114;return $myShareBox.css({top:top,left:"auto",right:right+"px",width:"0px"}),$("#gallery-thumbs").after($myShareBox),$myShareBox.animate({width:"400px"},350,"linear",function(){var myLeftOffset=$myShareBox.offset().left;myLeftOffset<0&&$myShareBox.animate({right:right+myLeftOffset},200)}),!1}),$document.on("click","#gallery div.photos div.photo .shareThisPhoto",function(e){var $this=$(this),$li=$this.parents("div.photo:first");if($li.hasClass("shareBoxOpen"))$li.removeClass("shareOpen shareBoxOpen commentsOpen").css({height:"",marginTop:"auto"}),$li.find(".shareBox").remove();else{$li.addClass("shareOpen shareBoxOpen").removeClass("commentsOpen"),$li.find(".fb-wrap").hide(),$li.css({});var $myShareBox=splash.pageAction.createMyShareBox($li.find(".urlShare").attr("href")),newLeft=$li.width()/2-200;$myShareBox.css({top:$this.parent().height(),right:"auto",left:newLeft,height:"0px"}),$this.parents(".photo-util").find(".util-actions-wrap").prepend($myShareBox),$myShareBox.animate({height:"116px"},1,"linear",function(){setTimeout(function(){$("div.photos").scrollTop($("div.photos").height())},0)}),$this.hide()}})}function takeLinkActionToTopLevelFrameIfNeeded(link,event){if(splash.server.constants.onCmsPage){var href;if("string"==typeof link)href=link;else{if(void 0===link.jquery)return!1;href=link.attr("href")}if(href&&0!==href.indexOf("#"))return event.preventDefault(),parent.location=href,!0}return!1}function getFacebookInfo(signed_request){FB.api("/me",function(response){var data={};if(void 0!==response.email&&(data.email=response.email),void 0!==response.first_name&&(data.first_name=response.first_name),void 0!==response.last_name&&(data.last_name=response.last_name),void 0===data.first_name&&void 0===data.last_name&&void 0!==response.name){var split_name=response.name.split(" ");2==split_name.length&&(data.first_name=split_name[0],data.last_name=split_name[1])}if(void 0!==response.birthday&&(data.birth_date=response.birthday),void 0!==response.gender&&(data.gender=response.gender),void 0!==response.location&&void 0!==response.location.name){data.location=response.location.name;var split_location=data.location.split(",");2==split_location.length&&(data.state=split_location[1].trim())}void 0!==response.website&&(data.website=response.website),void 0!==response.work&&response.work.length>0&&(void 0!==response.work[0].employer&&void 0!==response.work[0].employer.name&&(data.company=response.work[0].employer.name),void 0!==response.work[0].description&&(data.job_title=response.work[0].description)),fillRsvpForm(data,"facebook");var encoded_response=JSON.stringify(response),$social_input=$("#rsvp-form-inner").find('input[social-attr="splash_facebook_rsvp"]');$social_input.length>0&&$social_input.val(encoded_response)},{fields:"id,name,email,gender,birthday,location,website,work"})}function fillRsvpForm(rsvp_data,social_network){var $rsvp_form=$(".rsvp-form");void 0!==rsvp_data.first_name&&($rsvp_form.find('input[name="first_name"]').val(rsvp_data.first_name),socialIconInputUpdate("first-name",social_network)),void 0!==rsvp_data.last_name&&($rsvp_form.find('input[name="last_name"]').val(rsvp_data.last_name),socialIconInputUpdate("last-name",social_network)),void 0!==rsvp_data.email&&($rsvp_form.find('input[name="email"]').val(rsvp_data.email),socialIconInputUpdate("email",social_network));for(var custom_fields=splash.server._event.custom_rsvp_fields,i=0;i<Object.keys(custom_fields).length;i++){var field=custom_fields[i],name=field.name;(/^company/i.test(name)||/^organization/i.test(name))&&void 0!==rsvp_data.company&&fillValueByType($rsvp_form,field,rsvp_data.company,social_network),/^job ?title/i.test(name)&&void 0!==rsvp_data.job_title&&fillValueByType($rsvp_form,field,rsvp_data.job_title,social_network),/^address/i.test(name)&&void 0!==rsvp_data.address&&fillValueByType($rsvp_form,field,rsvp_data.address,social_network),/^city/i.test(name)&&void 0!==rsvp_data.city&&fillValueByType($rsvp_form,field,rsvp_data.city,social_network),/^state/i.test(name)&&void 0!==rsvp_data.state&&fillValueByType($rsvp_form,field,rsvp_data.state,social_network),/^zip/i.test(name)&&void 0!==rsvp_data.zip&&fillValueByType($rsvp_form,field,rsvp_data.zip,social_network),/^phone/i.test(name)&&void 0!==rsvp_data.phone&&fillValueByType($rsvp_form,field,rsvp_data.phone,social_network),/^website/i.test(name)&&void 0!==rsvp_data.website&&fillValueByType($rsvp_form,field,rsvp_data.website,social_network),(/^gender/i.test(name)||/^sex/i.test(name))&&void 0!==rsvp_data.gender&&fillValueByType($rsvp_form,field,rsvp_data.gender,social_network),/^birth ?da(te|y)/i.test(name)&&void 0!==rsvp_data.birth_date&&fillValueByType($rsvp_form,field,rsvp_data.birth_date,social_network),/^instagram/i.test(name)&&void 0!==rsvp_data.instagram&&fillValueByType($rsvp_form,field,rsvp_data.instagram,social_network),/^twitter/i.test(name)&&void 0!==rsvp_data.twitter&&fillValueByType($rsvp_form,field,rsvp_data.twitter,social_network),/^pinterest/i.test(name)&&void 0!==rsvp_data.pinterest&&fillValueByType($rsvp_form,field,rsvp_data.pinterest,social_network)}}function fillValueByType($rsvp_form,field,value,social_network){if("text"==field.type){var $rsvp_form_input=$rsvp_form.find('input[name="'+field.column_name+'"]'),$rsvp_form_input_parent=$rsvp_form_input.parent().closest("div");switch($rsvp_form_input.val(value),$rsvp_form_input_parent.removeClass("icon-f-twitter icon-f-facebook-rect icon-f-linkedin-squared icon-f-googleplus-rect"),social_network){case"facebook":$rsvp_form_input_parent.addClass("kohtello-icon icon-f-facebook-rect");break;case"twitter":$rsvp_form_input_parent.addClass("kohtello-icon icon-f-twitter");break;case"linkedin":$rsvp_form_input_parent.addClass("kohtello-icon icon-f-linkedin-squared");break;case"google_plus":$rsvp_form_input_parent.addClass("kohtello-icon icon-f-googleplus-rect")}}else if("radio"==field.type){var $radio_container=$rsvp_form.find('input[num="'+field.number+'"]').parents(".radio-holder"),$options=$radio_container.find('input[type="radio"]');switch($.each($options,function(i,option){var $option=$(option),option_value=$option.val();if(new RegExp("^"+value,"i").test(option_value))return $option.click(),!1}),$radio_container.removeClass("icon-f-twitter icon-f-facebook-rect icon-f-linkedin-squared icon-f-googleplus-rect"),social_network){case"facebook":$radio_container.addClass("kohtello-icon icon-f-facebook-rect");break;case"twitter":$radio_container.addClass("kohtello-icon icon-f-twitter");break;case"linkedin":$radio_container.addClass("kohtello-icon icon-f-linkedin-squared");break;case"google_plus":$radio_container.addClass("kohtello-icon icon-f-googleplus-rect")}}else if("date"==field.type){var split_date;if(3==(split_date=value.indexOf("/")>-1?value.split("/"):value.indexOf("-")>-1?value.split("-"):value.split("/")).length)var month=split_date[0],day=split_date[1],year=split_date[2];else if(2==split_date.length)var month=split_date[0],day=split_date[1];else if(1==split_date.length)year=split_date[0];var $date_container=$rsvp_form.find('input[name="'+field.column_name+'"]').parents(".date-holder");switch(void 0!==day&&($dropdown=$date_container.find(".nu-dropdown.day"),flipDropDown($dropdown,day,!0)),void 0!==month&&($dropdown=$date_container.find(".nu-dropdown.month"),flipDropDown($dropdown,month,!0)),void 0!==year&&($dropdown=$date_container.find(".nu-dropdown.year"),flipDropDown($dropdown,year,!0)),$date_container.removeClass("icon-f-twitter icon-f-facebook-rect icon-f-linkedin-squared icon-f-googleplus-rect"),social_network){case"facebook":$date_container.addClass("kohtello-icon icon-f-facebook-rect");break;case"twitter":$date_container.addClass("kohtello-icon icon-f-twitter");break;case"linkedin":$date_container.addClass("kohtello-icon icon-f-linkedin-squared");break;case"google_plus":$date_container.addClass("kohtello-icon icon-f-googleplus-rect")}}}function removeHighlightColor(){$(".social-auth-container").removeClass("selected-color")}function socialIconInputUpdate(input_field,social_network){switch($inputSocialField=$("#rsvp-form-inner .social-auth-fields .rsvp-"+input_field+".kohtello-icon"),$inputSocialField.removeClass("icon-f-twitter icon-f-facebook-rect icon-f-linkedin-squared icon-f-googleplus-rect"),social_network){case"facebook":$inputSocialField.addClass("icon-f-facebook-rect");break;case"twitter":$inputSocialField.addClass("icon-f-twitter");break;case"linkedin":$inputSocialField.addClass("icon-f-linkedin-squared");break;case"google_plus":$inputSocialField.addClass("icon-f-googleplus-rect")}}function getMatchHeightContainers($el){return $el||($el=$("#splash-container")),$el.find(".layoutGrp.match-height")}function matchHeight($layoutGrp,forcedMatchHeightMode,forceWithoutLayoutGroup,opts){opts="object"==typeof opts?opts:{},null==$layoutGrp&&($layoutGrp=getMatchHeightContainers()),$layoutGrp.hasClass("layoutGrp")||forceWithoutLayoutGroup||($layoutGrp=$layoutGrp.closest(".layoutGrp")),$layoutGrp.each(function(){var $thisLayoutGrp=$(this),matchMode="string"==typeof forcedMatchHeightMode?forcedMatchHeightMode:$thisLayoutGrp.attr("match-height"),childrenSelector=opts.childrenSelector||".list-item";$layoutGrp.hasClass("container-ele")||$layoutGrp.hasClass("dope-repeatable-container")?childrenSelector="> .grp":$layoutGrp.hasClass("ohmyhub")&&(childrenSelector=".ohmyhub-item, .hub-mastercard-workspace .event-hub-master-card"),"string"==typeof matchMode&&"section"===matchMode?matchSectionsHeight($thisLayoutGrp,childrenSelector):"string"==typeof matchMode&&"none"===matchMode?unmatchHeight($thisLayoutGrp):matchChildrenHeight($thisLayoutGrp,childrenSelector)})}function matchChildrenHeight($layoutGrp,childrenSelector){var thisHeight=0;$layoutGrp.find(childrenSelector).each(function(){var $child=$(this);$child.css("min-height","");var childHeight=$child.outerHeight();childHeight>thisHeight&&(thisHeight=childHeight)}),$layoutGrp.find(childrenSelector).css("min-height",thisHeight+"px").addClass("match-height-affected")}function matchSectionsHeight($layoutGrp,childrenSelector){var heights={};$layoutGrp.find(childrenSelector).each(function(){$(this).find(".layoutGrp,.cardLayoutGrp").each(function(){var $section=$(this);if(0===$section.find(".layoutGrp,.cardLayoutGrp").length){$section.css("min-height","");var sectionHeight=$section.outerHeight(),sectionClass=$section.attr("class").match(/ddh-[a-z0-9]+/);sectionClass||(sectionClass=$section.attr("class").match(/drill-rep-[a-z0-9]+/)),sectionClass&&(!heights[sectionClass]||sectionHeight>heights[sectionClass])&&(heights[sectionClass]=sectionHeight)}})});for(var sectionClass in heights)$layoutGrp.find("."+sectionClass).css("min-height",heights[sectionClass]+"px").addClass("match-height-affected")}function unmatchHeight($layoutGrp){null==$layoutGrp&&($layoutGrp=$("#splash-container").find(".layoutGrp.match-height")),$layoutGrp.find(".match-height-affected").css("min-height","").removeClass("match-height-affected")}function openContactOrganizerModal(){window.SPLASH&&"function"==typeof window.SPLASH.flag&&window.SPLASH.flag("newContactTheOrganizer")?splash.ContactFormManager.openModal():$("#contact-event-organizer").fireSimpleModal()}function checkForNoHeaderStuff(){if(void 0===splash.server._event.theme_styles||void 0===splash.server._event.theme_styles.check_empty_header||""+splash.server._event.theme_styles.check_empty_header!="1")return!1;0==$(".event-bg-url").children('.layoutGrp:not(".element-spacer"):visible').length?$(".event-bg-url").addClass("noHeaderContent"):$(".event-bg-url").removeClass("noHeaderContent")}function openPriceValidationCheck($price_input){var inputted_price=$price_input.val();""!=inputted_price&&(inputted_price=parseFloat(inputted_price),isNaN(inputted_price)||inputted_price<0?inputted_price=0:inputted_price<1&&inputted_price>0&&(inputted_price=1),(inputted_price<parseFloat($price_input.data("min"))||parseFloat($price_input.data("max"))>0&&inputted_price>parseFloat($price_input.data("max")))&&$price_input.parents(".form-holder").find(".required-fields").html("Please ensure price falls between minimum and maxmimum.").show(),inputted_price=inputted_price.toFixed(2),$price_input.val(inputted_price))}function fixFooter(){var $mc=$("#main-canvas"),$footer=$("#footer"),mcHeight=$mc.outerHeight(),footerHeight=$footer.is(":visible")?$footer.outerHeight():0,totalHeight=mcHeight+footerHeight,nuHeight=windowHeight-footerHeight,$mcByClass=$mc.find("> .main-canvas-min-height");totalHeight<windowHeight&&($mc.css("min-height",nuHeight+"px"),$mcByClass.css("min-height",nuHeight+"px"))}function galleryInit(){if($("#gallery-thumbs div.photo-thumb").length>0){var $gBlank=$("#gallery").find("div.photo:first");$gBlank.detach(),gBlankHtml='<div photo-id=":id:" n=":i:" class="photo :type:">'+$gBlank.html()+"</div>";for(i in galleryImages)galleryI[galleryImages[i].id]=parseInt(i)+1;$(document).on({mouseenter:function(){$(this).addClass("activeLI")},mouseleave:function(){$(this).removeClass("activeLI")}},"div.photos div.photo"),$("div.photos").click(function(){$("div.activeLI").length<1&&hideTheGallery()}),"undefined"==typeof adminSort&&$(document).on("click","div.photo-thumb",function(){if($("#finetune-block").length)return!1;ga("splash.send","event","Splash","GalleryOpenThumb","id:"+splash.server.constants.event_id+" pid:"+$(this).find("img.th").attr("photo-id")),showTheGallery($(this).find("img.th").attr("photo-id"))}),setTimeout(function(){splash.galleryThumbFlow()},1e3),$("#gallery .mask-below, #gallery .actions .close").click(function(){ga("splash.send","event","Splash","GalleryClose","id:"+splash.server.constants.event_id),hideTheGallery()}),currentPhotoId=$("#gallery div.photos div.photo:first").attr("photo-id"),$("#gallery .actions .next,#gallNext").click(function(){ga("splash.send","event","Splash","GalleryNext","id:"+splash.server.constants.event_id+" pid:"+currentPhotoId),galleryNext()}),$("#gallery .photo-count .first").click(function(){var photoId=galleryI[0];ga("splash.send","event","Splash","GalleryFirst","id:"+splash.server.constants.event_id+" pid:"+currentPhotoId),showTheGallery(photoId)}),$("#gallery .photo-count .last").click(function(){var photoId=galleryI[galleryI.length-1];ga("splash.send","event","Splash","GalleryLast","id:"+splash.server.constants.event_id+" pid:"+currentPhotoId),showTheGallery(photoId)}),$("#gallery .actions .prev,#gallPrev").click(function(){ga("splash.send","event","Splash","GalleryPrev","id:"+splash.server.constants.event_id+" pid:"+currentPhotoId),galleryPrevious()}),$("#gallery .actions .playPause").click(function(){$(this).find(".play").hasClass("hide")?(ga("splash.send","event","Splash","GalleryStop","id:"+splash.server.constants.event_id+" pid:"+currentPhotoId),$(this).find(".play").removeClass("hide"),$(this).find(".pause").addClass("hide"),stopGallerySlideshow()):(ga("splash.send","event","Splash","GalleryPlay","id:"+splash.server.constants.event_id+" pid:"+currentPhotoId),$(this).find(".play").addClass("hide"),$(this).find(".pause").removeClass("hide"),startGallerySlideshow())}),$(document).on("click",".pinterestShare",function(){var n=$(this).attr("n");ga("splash.send","event","Splash","PhotoPinterest","id:"+splash.server.constants.event_id+" n:"+n),href="http://pinterest.com/pin/create/button/?media=";var imgSrc=$(this).parents("li:first").find("img.ph").attr("src");return"/"==imgSrc[0]?href+=encodeURIComponent("http://"+gallVars.domain+imgSrc):href+=encodeURIComponent(imgSrc),href+="&url=",href+=$(this).parent().attr("share-url"),href+="&alt=alt&title=",href+=gallVars.urlencodedtitle,href+="&is_video=false",window.open(href,"Pinterest","width=590,height=360"),!1}),$(document).keyup(function(e){if(galleryOpen){var keyCode=e.which;37==keyCode||38==keyCode?(ga("splash.send","event","Splash","GalleryKeyPrevious","id:"+splash.server.constants.event_id+" k:"+keyCode),galleryPrevious()):39==keyCode||40==keyCode?(ga("splash.send","event","Splash","GalleryKeyNext","id:"+splash.server.constants.event_id+" k:"+keyCode),galleryNext()):27==keyCode&&(ga("splash.send","event","Splash","GalleryKeyEsc","id:"+splash.server.constants.event_id+" k:"+keyCode),hideTheGallery())}});var $_GET=getQueryParams(document.location.search);if(window.location.hash&&window.location.hash.match(/^#p[0-9]+/)){index=parseInt(window.location.hash.replace(/^#p/,""));ga("splash.send","event","MobileSplash","GalleryAutoOpenHash","id:"+splash.server.constants.event_id+" p:"+index),index<=galleryImages.length&&setTimeout("showTheGallery(1,"+index+")",1e3)}else if($_GET.p&&!isNaN(parseInt($_GET.p))&&isFinite($_GET.p)){index=parseInt($_GET.p);ga("splash.send","event","Splash","GalleryAutoOpenShared","id:"+splash.server.constants.event_id+" g:"+index),index<=galleryImages.length&&setTimeout("showTheGallery(1,"+index+")",1e3)}else if($_GET.i&&!isNaN(parseInt($_GET.i))&&isFinite($_GET.i)){var photoid=parseInt($_GET.i),index=!1;galleryI[photoid]&&(index=galleryI[photoid],ga("splash.send","event","Splash","GalleryAutoOpenShared","id:"+splash.server.constants.event_id+" g:"+index),setTimeout("showTheGallery(1,"+index+")",1e3))}$_GET.d&&!isNaN(parseInt($_GET.d))&&isFinite($_GET.d)&&(photoLoadDelay=1e3*$_GET.d,lzD=photoLoadDelay),$_GET.party&&(partyMode=!0,setTimeout(function(){checkForNewPhotos()},5e3)),void 0!==$_GET.expired&&($("#rsvp-button").click(),$(".rsvp-form .required-fields").css({"font-family":"Helvetica","font-size":"12px"}).html("Your order expired").show()),$("#splash-container").on("click",".stickyMedia",function(e){var $s=$("#stickyMedia");$s.empty().show(),$s.css({bottom:"auto",left:$(this).offset().left,top:$(this).offset().top-$(window).scrollTop(),width:$(this).width(),height:$(this).height(),border:"2px dotted #333333",background:"#ffffff"});var targetWidth=$(this).attr("w"),targetHeight=$(this).attr("h"),content=!1;if(void 0!=$(this).attr("content"))content=$(this).attr("content");else if(void 0!=$(this).attr("video-url")){var vUrl=$(this).attr("video-url");for(x in videoUrlElements)if(vUrl.match(RegExp(videoUrlElements[x].reg))){content=videoUrlElements[x].element.replace(/:video-url:/g,vUrl),$c=$(content),void 0!=$c.attr("content")&&(content=$c.attr("content"),targetHeight=$c.attr("h"),targetWidth=$c.attr("w"));break}}return!1!==content&&($s.animate({top:$(window).height()-targetHeight,left:$(window).width()/2-targetWidth/2,width:targetWidth,height:targetHeight},{duration:1e3,complete:function(){$s.append(content+'<span class="close">&#10006;</span>'),$s.css({bottom:0,top:"auto",border:0})}}),stickyOn=!0),!1}),$("#splash-container").on("click","#stickyMedia .close",function(){$("#stickyMedia").empty().hide(),stickyOn=!1})}}function getQueryParams(qs){qs=qs.split("+").join(" ");for(var tokens,params={},re=/[?&]?([^=&]+)=?([^&]*)?/g;tokens=re.exec(qs);)params[decodeURIComponent(tokens[1])]=decodeURIComponent(tokens[2]);return params}function hideTheGallery(){$("body").css("overflow","auto"),galleryOpen=!1,$("#gallery").fadeOut(400,function(){$(this).find("div.photos").empty()}),window.location.hash="",stopGallerySlideshow()}function startGallerySlideshow(){gallerySliding=!0,slideGallery()}function slideGallery(){gallerySliding&&(galleryNext(),ga("splash.send","event","Splash","GalleryPlaySlide","id:"+splash.server.constants.event_id+" pid:"+currentPhotoId),setTimeout(function(){slideGallery()},5e3))}function stopGallerySlideshow(){gallerySliding=!1}function showTheGallery(photoId,n,action){void 0!=typeof collapseStickyOnGaleryOpen&&$("#stickyMedia").addClass("closed"),videoPlayer.pause(),$("body").css("overflow","hidden"),($gallery=$("#gallery")).find("div.photos").empty(),galleryOpen=!0;var $ul=$gallery.find("div.photos");if(photoId){if(galleryIframeUtils.switchOrigin="thumbnail",void 0===n)var n=galleryI[photoId];if(void 0===n)return hideTheGallery(),!1;var $main=newPhotoLi(n);$ul.append($main),loadPhoto(n,0,$main),positionPhotoLi(n,0);var np1=n+1;np1==galleryImages.length+1&&1!=galleryImages.length&&(np1=1);var $nPOne=newPhotoLi(np1);if(!1!==$nPOne&&($ul.append($nPOne),loadPhoto(np1,1,$nPOne),positionPhotoLi(np1,1,$nPOne)),2!=galleryImages.length){var nm1=n-1;0==nm1&&1!=galleryImages.length&&(nm1=galleryImages.length);var $nMOne=newPhotoLi(nm1);!1!==$nMOne&&($ul.append($nMOne),loadPhoto(nm1,-1,$nMOne),positionPhotoLi(nm1,-1,$nMOne))}$("#gallery .photo-count span.current").text(n)}$gallery.fadeIn()}function galleryNext(){galleryIframeUtils.switchOrigin="arrow";var p0=parseInt($gallery.find("div.photo[p=0]").attr("n")),p1=parseInt($gallery.find("div.photo[p=1]").attr("n"));if(isNaN(p1)||isNaN(p0))return!1;$("#gallery").find("div.photos div.photo[p=-1]").remove(),positionPhotoLi(p0,-1),positionPhotoLi(p1,0);var newnp2=p0+2;if(newnp2==galleryImages.length+1?newnp2=1:newnp2==galleryImages.length+2&&(newnp2=2),2!=galleryImages.length){var $nP=newPhotoLi(newnp2);$gallery.find("div.photos").append($nP),positionPhotoLi(newnp2,1,$nP),loadPhoto(newnp2,1,$nP)}}function galleryPrevious(){galleryIframeUtils.switchOrigin="arrow";var p0=parseInt($gallery.find("div.photo[p=0]").attr("n")),pm1=parseInt($gallery.find("div.photo[p=-1]").attr("n"));if(isNaN(pm1)||isNaN(p0))return!1;$("#gallery").find("div.photos div.photo[p=1]").remove(),positionPhotoLi(p0,1),positionPhotoLi(pm1,0);var newnm2=p0-2;if(0==newnm2?newnm2=galleryImages.length:-1==newnm2&&(newnm2=galleryImages.length-1),2!=galleryImages.length){var $nM=newPhotoLi(newnm2);$gallery.find("div.photos").append($nM),positionPhotoLi(newnm2,-1,$nM),loadPhoto(newnm2,-1,$nM)}}function newPhotoLi(n){var newHtml=gBlankHtml.replace(/:i:/g,n);if(galleryImages[n-1]){for(x in galleryImages[n-1])if("credit"==x){var credit=galleryImages[n-1][x];"twitter"==galleryImages[n-1].otype?credit="@"+credit+"<br>via Twitter":"instagram"==galleryImages[n-1].otype?credit="@"+credit+"<br>via Instagram":"facebook"==galleryImages[n-1].otype&&(credit="@"+credit+"<br>via Facebook"),""!=credit&&(credit="By "+credit),newHtml=newHtml.replace(RegExp(":"+x+":","g"),credit)}else newHtml=newHtml.replace(RegExp(":"+x+":","g"),galleryImages[n-1][x]);for(x in gallVars)newHtml=newHtml.replace(RegExp(":"+x+":","g"),gallVars[x]);var $n=$(newHtml);if(""!=galleryImages[n-1]["video-url"])for(x in videoUrlElements)if(galleryImages[n-1]["video-url"].match(RegExp(videoUrlElements[x].reg))){var ele=videoUrlElements[x].element.replace(/:video-url:/g,galleryImages[n-1]["video-url"]);$n.find("img.ph").after(ele);break}return"undefined"!=typeof FB&&FB.XFBML.parse($n.find("span.comment")[0]),$n}return!1}function positionPhotoLi(n,p,$li){if(void 0===$li&&($li=$("#gallery").find("div.photos div.photo[n="+n+"]")),void 0===p&&$li&&(p=$li.attr("p")),galleryImages[n-1]){if($li.length>0)if($li.attr("p",p),0==p){if(galleryNP.n=n,"arrow"!=galleryIframeUtils.switchOrigin&&galleryIframeUtils.isActive()){$photoThumb=$("#gallery-container .photo-thumb[event-photo-id="+$li.attr("photo-id")+"]");var thumbTopDistance=Math.round($photoThumb.offset().top)-$(window).scrollTop();thumbTopDistance+=Math.round($photoThumb.find(".inner>img").height()/2),$li.css({top:thumbTopDistance+"px",verticalAlign:"top"}),$("#gallery-container .gall-ctrl").css({top:thumbTopDistance+"px",verticalAlign:"top"}),galleryIframeUtils.top=thumbTopDistance}else"arrow"==galleryIframeUtils.switchOrigin&&galleryIframeUtils.isActive()&&$li.css({top:galleryIframeUtils.top+"px",verticalAlign:"top"});$li.css({right:"auto",left:"auto",zIndex:2,overflow:"visible",position:"relative"}),$li.siblings("div.photo").removeClass("active").find("span.share,span.credit,span.caption,.fb-wrap").addClass("hide"),$li.addClass("active").find("span.share,span.credit,span.caption").removeClass("hide"),"arrow"!=galleryIframeUtils.switchOrigin?$("#gallery").find("div.primary").html('<img src="'+galleryImages[n-1].src+'" />'):"arrow"==galleryIframeUtils.switchOrigin&&($("#gallery").find("div.secondary").html('<img src="'+galleryImages[n-1].src+'" />'),$("#gallery").find("div.mask.primary").animate({opacity:0},{duration:0,complete:function(){$("#gallery").find("div.secondary").removeClass("secondary").addClass("primary"),$(this).addClass("secondary").removeClass("primary"),$(this).css("opacity",1)}})),$("#gallery .photo-count span.current").text(n)}else if(1==p){galleryNP.np1=n;var newLeft=$(window).width()-100;$li.css({right:"auto",zIndex:1,overflow:"hidden"}),$li.animate({left:newLeft},{duration:0,complete:function(){}})}else if(-1==p){galleryNP.nm1=n;var newRight=$(window).width()-100;$li.css({left:"auto",zIndex:1,overflow:"hidden"}),$li.animate({right:newRight},{duration:0,complete:function(){}})}else 2==p?(galleryNP.np2=n,$li.css("left",$(window).width()+200)):-2==p&&(galleryNP.nm2=n,$li.css("left",$(window).width()+200))}else $li.css("left",$(window).width()+200),$li.attr("p",p);setImageOrientation($li)}function loadPhoto(n,p,$li){if(void 0===$li&&($li=$("#gallery").find("div.photos div.photo[n="+n+"]")),galleryImages[n-1]&&-1==$.inArray(n,loadedPhotos)){if(loadedPhotos.push(n),!$li.hasClass("quote"))if(""!=galleryImages[n-1].src){var loader=new ImageLoader(galleryImages[n-1].src);loader.loadEvent=function(url,image){setTimeout(function(){var $l=$("#gallery").find("div.photos div.photo[n="+n+"]");$l.addClass("sized").find("img.ph").attr("src",url).load(function(){positionPhotoLi(0),setImageOrientation($l)})},photoLoadDelay)},loader.load()}else $("#gallery").find("div.photos div.photo[n="+n+"]").addClass("sized").find("img.ph").attr("src","").addClass("hide")}else galleryImages[n-1]&&!$li.hasClass("quote")&&$li.length>0&&(""!=galleryImages[n-1]?$li.find("img.ph").removeClass("hide"):$li.find("img.ph").addClass("hide"),$li.find("img.ph").addClass("sized").attr("src",galleryImages[n-1].src).load(function(){positionPhotoLi(n),setImageOrientation($(this).closest(".photo"))}))}function setImageOrientation($li){var $image=$li.find("img.ph"),p=$li.attr("p");if(0==p||-1==p||1==p){var diff=$image.height()-$image.width();if(1==$image.length){var licss={"max-width":"none","max-height":"none"},imagecss={height:"auto",width:"auto","max-width":"none","max-height":"none"};if($li.hasClass("quote")||(licss.height="auto"),diff>0?(licss.maxHeight="90%",imagecss.maxHeight="100%"):(licss.maxWidth="90%",imagecss.maxWidth="100%"),galleryIframeUtils.isActive()&&(licss.maxHeight=Math.round(.9*$(window).width())+"px"),$li.css(licss),$image.css(imagecss),0==p&&galleryIframeUtils.isActive()){$li.css({"margin-top":"0px"}),$(".gall-ctrl>span").css({"margin-top":"-40px"});var marginTop=-Math.round($image.height()/2),offsetTop=Math.round($image.offset().top);offsetTop+$image.height()+marginTop+70>$(document).height()&&(newMarginTop=$(document).height()-(offsetTop+$image.height())-70,$(".gall-ctrl>span").css("margin-top",newMarginTop-marginTop+"px"),marginTop=newMarginTop),offsetTop+marginTop+70<0&&(newMarginTop=70-offsetTop,$(".gall-ctrl>span").css("margin-top",newMarginTop-marginTop+"px"),marginTop=newMarginTop),$li.css({"margin-top":marginTop+"px"})}}}}function galleryThumbFlow(force_cliff){galleryOuterWidthReflow()}function resizeAdventureFooter(){var thisWidth,$ac=$("#splash-container").find(".adventure-content");$ac.length>0&&($("body").hasClass("finetune")?thisWidth=$("#splash-container").outerWidth()-$(".event-bg-url").outerWidth()+"px":(thisWidth=$ac.outerWidth()+"px",$("#footer").css("width",thisWidth)),$("#footer").css("width",thisWidth))}function resizeAdventureCanvas(){var $ac=$("#splash-container").find(".adventure-content");if($ac.length>0){var newMin=$ac.css("min-height").replace("px","")-$("#footer").outerHeight();$ac.outerHeight()>$(window).outerHeight()?$ac.css("min-height",$(".event-bg-url").outerHeight()+50+"px"):$ac.css("min-height",newMin+"px"),resizeAdventureFooter()}}function resizeFlyer(){$("body").hasClass("finetune")?$("#main-canvas").css("margin-bottom",$(".st-details-wrap").height()+40):$("#footer").css("padding-bottom",$(".st-details-wrap").height()+40),$(".st-content-wrap").css("padding-bottom",.9*$(".st-details-wrap").outerHeight()+"px")}function scrollFlyer(){$(window).scrollTop()+$(window).height()>$(document).height()-$("#footer").outerHeight()?($("body").addClass("scrolledToBottom"),$(".st-details-wrap").css("bottom",$("#footer").outerHeight()+"px")):($("body").removeClass("scrolledToBottom"),$(".st-details-wrap").css("bottom",""))}function scrollPoster(){$(window).scrollTop()+$(window).height()>$(document).height()-$("#footer").outerHeight()?($("body").addClass("scrolledToBottom"),$(".st-details-wrap").css("bottom",$("#footer").outerHeight()+"px")):($("body").removeClass("scrolledToBottom"),$(".st-details-wrap").css("bottom",""))}function flyerReady(){$(".st-content-wrap").css("padding-bottom",.9*$(".st-details-wrap").outerHeight()+"px"),$("#footer").css("padding-bottom","")}function adventureReady(){var $ac=$("#splash-container").find("div.adventure-content");if($ac.length>0){$ac.attr("initMinHeight",$ac.css("min-height")),$(".toolBtn").on("click",function(){setTimeout(function(){"st-adventure-v2"==splash.server.constants.thisTheme&&resizeAdventureFooter()},10)});var resizeAdvTimer;$("#splash-container").on("keyup",".adventureStuffWrap, .event-bg-url",function(){"st-adventure-v2"==splash.server.constants.thisTheme&&(clearTimeout(resizeAdvTimer),resizeAdvTimer=setTimeout(function(){"st-adventure-v2"==splash.server.constants.thisTheme&&splash.cmsUtils.applyAutoWindowSizesToComponents()},100))}),resizeAdventureFooter()}}function adjustSlantyCanvas(){if("undefined"==typeof $slantCanvas||0==$slantCanvas.length)return!1;$canvasHeight=$("#main-canvas").height()-$slantCanvas.offset().top,$(".slantCanvasContain").css("height",$canvasHeight+"px")}function updateClassicSidebar(){$sidebar=$(".details-wrap:first").find(".classicSidebar");var color=$(".content-wrap.link-canvas-bg").css("background-color")+" !important";$("#main-canvas").hasClass("darkBG")?($sidebar.addClass("dark"),$sidebar.css("background-color",color).find(".details-cap").css("background-color",color)):($sidebar.removeClass("dark"),$sidebar.css("background-color","").find(".details-cap").css("background-color",""))}function resizeGalleryCarousel(){$("#main-canvas").find(".carousel").each(function(){$slides=$(this).find(".slides");var width=$slides.parent().width(),$imgs=$slides.find(".list-item");$imgs.css("width",width+"px"),$imgs.length>0&&$slides.css("width",width*($imgs.length+1)+"px"),$(this).slideToCurrent()})}function updateHoverColors(){var $mc=$("#main-canvas"),color=$mc.css("background-color");splash.server.constants.canvasColor&&(color=splash.server.constants.canvasColor),"dark"==parseColorLightDark(color)?$mc.addClass("darkBG").removeClass("lightBG"):$mc.addClass("lightBG").removeClass("darkBG"),"st-slanty-v2"==splash.server.constants.thisTheme&&updateClassicSidebar()}function parseColorLightDark(color){var values=parseColorShade(color);return(parseInt(values.red)+parseInt(values.green)+parseInt(values.blue))/3<146&&values.alpha>.475?"dark":"light"}function parseColorShade(color){var values={red:null,green:null,blue:null,alpha:null};if(0===color.indexOf("#"))values=3==(color=color.substr(1)).length?{red:parseInt(color[0]+color[0],16),green:parseInt(color[1]+color[1],16),blue:parseInt(color[2]+color[2],16),alpha:1}:{red:parseInt(color.substr(0,2),16),green:parseInt(color.substr(2,2),16),blue:parseInt(color.substr(4,2),16),alpha:1};else if(0===color.indexOf("rgb(")){pars=color.indexOf(",");values={red:parseInt(color.substr(4,pars)),green:parseInt(color.substr(pars+1,color.indexOf(",",pars))),blue:parseInt(color.substr(color.indexOf(",",pars+1)+1,color.indexOf(")"))),alpha:1}}else if(0===color.indexOf("rgba(")){var pars=color.indexOf(","),repars=color.indexOf(",",pars+1);values={red:parseInt(color.substr(5,pars)),green:parseInt(color.substr(pars+1,repars)),blue:parseInt(color.substr(color.indexOf(",",pars+1)+1,color.indexOf(",",repars))),alpha:parseFloat(color.substr(color.indexOf(",",repars+1)+1,color.indexOf(")")))}}else values={red:0,green:0,blue:0,alpha:1};return values}function checkViewportForThumbsToLoad(checkAll){if(!1===doneLoadingThumbs){var $galleryThumbs=$("#gallery-thumbs");if($nextUnloadedThumb=checkAll?$galleryThumbs.find("img.unloaded:first"):$galleryThumbs.find("img.unloaded"),$nextUnloadedThumb.length>0)$nextUnloadedThumb.each(function(){if(!$(this).hasClass("loading-thumb")&&winBottom>=$(this).offset().top)return loadMoreThumbs(),!1});else if("undefined"!=typeof unloadedGalleryThumbnails&&unloadedGalleryThumbnails&&unloadedGalleryThumbnails.length>0&&winBottom>=$("#galleryThumbBottom").offset().top){newToLoad=thumbsToLoad,newToLoad>unloadedGalleryThumbnails.length&&(newToLoad=unloadedGalleryThumbnails.length),$blank=$galleryThumbs.find("div.photo-thumb:first").clone(),$blank.removeClass("photo-thumb clear video double triple").find(".quote-table,.via").remove().end().find("img.th").remove().end().find("span.play").remove();for(var playSpan={open:'<span class="play',audio:" audio stickyMedia",id:'" photo-id="',close:'"></span>'},x=0;x<newToLoad;x++){var $newBlank=$blank.clone(),n=unloadedGalleryThumbnails.shift();$newBlank.addClass(n["outer-class"]);var $img=$newBlank.find("img.th");if(0==$img.length&&($img=$("<img />"),$newBlank.find(".inner:first").append($img),$img.addClass("th").attr("loading-src","/images/eventfeed/loading-4.png")),$img.attr("data-src",n.src).attr("src",$img.attr("loading-src")).addClass("unloaded").attr("photo-id",n["photo-id"]).attr("thumbnail-position",n.thumbnail_position),""==n.src&&$img.css("display","none").removeClass("unloaded"),n["has-play"]){var playButtonSpan=playSpan.open;"audio"==n["has-play"]&&(playButtonSpan+=playSpan.audio+'" video-url="'+n["video-url"]),playButtonSpan+=playSpan.id+n["photo-id"]+playSpan.close,$newBlank.find("span.view").after(playButtonSpan)}$newBlank.find(".body").html(n.caption),$newBlank.find(".author").html(n.credit),$newBlank.find(".created").html(n.created),"quote"!=n.type&&("twitter"!=n.type&&"facebook"!=n.type||""!=n.src)||($newBlank.find(".quote .inner span:first").html(n.caption),$newBlank.find(".meta .username .inner span:first").html(n.credit),void 0!==n.remote_screen_name?$newBlank.find(".meta .username .inner span:last").html("@"+n.remote_screen_name):$newBlank.find(".meta .username .inner span:last").html(""),void 0!==n.meta_data&&"undefined"!==n.meta_data.remote_profile_img?$newBlank.find(".meta .thepoint img:first").attr("src",n.meta_data.remote_profile_img):$newBlank.find(".meta .thepoint img:first").hide()),"twitter"==n.otype?$newBlank.find(".inner:first").append('<img src="/images/eventfeed/share-twitter.png" alt="via Twitter" title="via Twitter" class="via">'):"instagram"==n.otype?$newBlank.find(".inner:first").append('<img src="/images/eventfeed/share-instagram.png" alt="via Instagram" title="via Instagram" class="via">'):"facebook"==n.otype&&$newBlank.find(".inner:first").append('<img src="/images/eventfeed/share-fbook.png" alt="via Facebook" title="via Facebook" class="via">'),$galleryThumbs.append($newBlank),unloadedGalleryThumbnails&&0==unloadedGalleryThumbnails.length&&(doneLoadingThumbs=!0,$("#loadMoreThumbs").hide())}$galleryThumbs.masonry("layout"),loadMoreThumbs()}else 0==$nextUnloadedThumb.length&&"undefined"!=typeof unloadedGalleryThumbnails&&unloadedGalleryThumbnails&&0==unloadedGalleryThumbnails.length&&(doneLoadingThumbs=!0,$("#loadMoreThumbs").hide())}}function positionThumbnail($img){setTimeout(function(){var fullPosition=$img.attr("thumbnail-position");if(fullPosition){var xyw=fullPosition.split(/;/);if($img.attr("display-width"))displayWidth=$img.attr("display-width");else{var $parent=$img.parents("div.photo-thumb");$parent.hasClass("triple")?$img.attr("display-width",splash.server.constants.thumbSizes.triple.w):$parent.hasClass("double")?$img.attr("display-width",splash.server.constants.thumbSizes.double.w):$img.attr("display-width",splash.server.constants.thumbSizes.single.w),$img.attr("display-width",$parent.width());var displayWidth=$img.attr("display-width")}var displayTop=0,displayLeft=0;3==xyw.length&&(displayWidth=Math.ceil(displayWidth/xyw[2]),displayTop=Math.ceil(xyw[1]*displayWidth),displayLeft=Math.ceil(xyw[0]*displayWidth)),$img.css({"min-width":"none","max-width":"none","margin-top":"-"+displayTop+"px","margin-left":"-"+displayLeft+"px",width:displayWidth+"px",height:"auto"})}else{var diff=$img.height()-$img.parent().height();diff<0?$img.css({"min-width":"none","max-width":"none",width:"auto",height:"100%"}):diff>0&&$img.css({height:"auto"})}},200)}function loadMoreThumbs(){if($thumbs=$("#gallery-thumbs img.unloaded"),$thumbs.length>0){var i=0;$thumbs.each(function(){i++;var $img=$(this);$img.removeClass("unloaded").addClass("loading-thumb");var loader=new ImageLoader($img.attr("data-src"));loader.loadEvent=function(url,image){setTimeout(function(){$img.attr("src",url),$img.removeClass("loading-thumb").parents(".inner:first").addClass("loaded").find(".lazy.message").hide(),splash.positionThumbnail($img)},photoLoadDelay)},loader.load()})}splash.galleryThumbFlow()}function checkForNewPhotos(){$.ajax(splash.server.constants.formBase+"/party/new",{type:"POST",data:{since:newPhotosSince},dataType:"json",success:function(response){void 0!==response.newSince&&(newPhotosSince=response.newSince),thumbsToLoad=2,void 0!==response.newThumbs&&response.newThumbs.length>0&&(unloadedGalleryThumbnails=unloadedGalleryThumbnails.concat(response.newThumbs),doneLoadingThumbs=!1,keepScrolling=!0,checkViewportForThumbsToLoad()),void 0!==response.scrollToTopWhenAtBottom&&(keepScrollingRepeat=response.scrollToTopWhenAtBottom,keepScrolling=!0,keepScrollingDown()),void 0!==response.partyDelayCheck&&(partyDelays.check=parseInt(response.partyDelayCheck)),void 0!==response.partyDelayScrollJump&&(partyDelays.scrollJump=parseInt(response.partyDelayScrollJump)),void 0!==response.stopParty&&(partyMode=!1,keepScrolling=!1),1==partyMode&&setTimeout(function(){checkForNewPhotos()},partyDelays.check)},timeout:5e3})}function keepScrollingDown(){clearTimeout(nwineiunvriwunewervwe),nwineiunvriwunewervwe=setTimeout(function(){if(keepScrolling){var current=$(document).scrollTop();$("html, body").stop().animate({scrollTop:current+partyDelays.scrollJump},1e3,"linear",function(){current==$(document).scrollTop()?keepScrollingRepeat?(keepScrolling=!1,setTimeout(function(){var $screen=$('<div style="position:fixed;width:100%;height:100%;background:#000000;display:none;top:0;left:0;z-index:23;"></div>');$("#main-canvas").append($screen),$screen.fadeIn(1e3,function(){$(document).scrollTop(0),$screen.fadeOut(1e3,function(){keepScrolling=!0,keepScrollingDown(),$screen.remove()})})},1e3)):keepScrolling=!1:keepScrollingDown()})}},0)}function galleryOuterWidthReflow(){clearTimeout(galleryOuterWidthReflowTimer),galleryOuterWidthReflowTimer=setTimeout(function(){var $g=$("#gallery-container");$g.hasClass("noAutoWidthChange")&&(w=$g.width());var $gt=$g.find("#gallery-thumbs"),cols=5;$g.hasClass("column4")?cols=4:$g.hasClass("column3")?cols=3:$g.hasClass("column2")?cols=2:$g.hasClass("column1")&&(cols=1),$(window).width()<481&&(cols=1);var w=$gt.width(),columnWidth=Math.floor(w/cols),singleWidth=columnWidth-8,singleHeight=Math.floor(.75*columnWidth)-8,doubleWidth=2*singleWidth+8,doubleHeight=2*singleHeight+8,tripleWidth=3*singleWidth+16,tripleHeight=3*singleHeight+16,$thumbs=$gt.find(".photo-thumb");$thumbs.each(function(){var $this=$(this),width=singleWidth,height=singleHeight;$this.hasClass("triple")?cols>=3?(width=tripleWidth,height=tripleHeight):2==cols&&(width=doubleWidth,height=doubleHeight):$this.hasClass("double")&&cols>=2&&(width=doubleWidth,height=doubleHeight);var css={width:width+"px",height:height+"px"};$this.css(css),$this.find(">.inner:first").css(css)});var $p=$gt.parent();$p.css("height",$p.height()+"px"),$gt.hasClass("masonry")&&$gt.masonry("destroy"),void 0!==splash.galleryElement.galleryMasonryVars&&$thumbs.length>0&&(splash.galleryElement.galleryMasonryVars.columnWidth=columnWidth,$gt.masonry(splash.galleryElement.galleryMasonryVars),$gt.addClass("masonry")),setTimeout(function(){$p.css("height","auto")},1e3)},100)}function lazyLoad(image,c){myLazyLoader.load(image,c)}function resizeSplashContainer(){var $footer=$("#footer");if($footer.is(":visible")){var $splash_container=$("#splash-container"),$body=$splash_container.find(".layoutGrp.event-body"),$windowObj=$(window);$body.length>0?$body.css("min-height",$windowObj.height()-$footer.outerHeight(!0)):$splash_container.css("min-height",$windowObj.height()-$footer.outerHeight(!0))}}function jumpToNavBlock($t,event){var jumpTo=$t.attr("href");if(void 0===jumpTo){if(void 0===$t.data("href"))return!1;jumpTo=$t.data("href")}var cmsComponent=splash.cmsComponentManager.getComponentInstance($t.closest(".layoutGrp")),componentInstance=splash.cmsComponentManager.getComponentInstance(cmsComponent);if("button"===cmsComponent.getType()&&cmsComponent.trigger("action-triggered"),jumpTo.match(/^#/)){jumpTo=jumpTo.replace("http://",""),event&&event.preventDefault&&event.preventDefault();$s=$(jumpTo);if($t.hasClass("nav-item-link")&&$t.closest(".nav-item").addClass("is-selected").siblings().removeClass("is-selected"),"#tobutton"===jumpTo||"#button"===jumpTo||"#rsvp"===jumpTo)return($s=$("#element-rsvp")).length<1&&splash.server&&splash.server.constants&&!splash.server.constants.inlineRsvp&&($s=$(".rsvp-form")),$s.length<1?$("html, body").animate({scrollTop:0},400):splash.pageAction.showPageActionForm($t),!1;if("#top"===jumpTo||"#totop"===jumpTo||"#event"===jumpTo)return $("html, body").animate({scrollTop:0},400),!1;if(jumpTo.indexOf("modal-")>-1){$("body").addClass("is-viewing-modal");var modalLocation=jumpTo,$modal=$('[modalid="'+modalLocation.replace(/(to|modal\-|#)/g,"")+'"]'),cmsModal=splash.cmsComponentManager.getComponentInstance($modal);cmsModal&&cmsModal.open()}else if("#guest-list"===jumpTo)splash.attendeesV1Modal.openModal();else if($.inArray(jumpTo.replace("#",""),navFunctions.getLinkableSections())>-1)$s=navFunctions.findSectionByHash(jumpTo);else if("#page-submit"===jumpTo){if((cmsFormComponent=!!(formGid=$t.attr("data-linked-form"))&&splash.cmsComponentManager.getComponentInstance(formGid))&&"function"==typeof cmsFormComponent.submit)return cmsFormComponent.submit(),!1;splash.pageAction.showPageActionForm(),"tickets"===splash.server._event.rsvp_method?splash.pageAction.submitTicketForm():splash.pageAction.submitRsvpForm()}else if("#survey-partial-save"===jumpTo){var formGid=$t.attr("data-linked-form"),cmsFormComponent=!!formGid&&splash.cmsComponentManager.getComponentInstance(formGid);if(!1===cmsFormComponent){var forms=cmsComponent.getParents({filterFunction:function(parent){var parentType=parent.getType();return"question-group"===parentType||"ticket-group"===parentType}});forms.length>0&&(cmsFormComponent=forms[0])}if(cmsFormComponent&&"function"==typeof cmsFormComponent.submit)return cmsFormComponent.submit({skipFieldValidation:!0,extraData:{survey_response_incomplete:!0}}),!1}else{if("#no-action"===jumpTo)return;if("#contact-organizer"===jumpTo)return openContactOrganizerModal(),!1;if("#cal"===jumpTo)return componentInstance.renderCalendarLinks(),!1;if(-1!==jumpTo.indexOf("hub-search")){var searchMode=jumpTo.replace(/#hub-search-[0-9a-z]+-/,""),hubId=jumpTo.replace(/#hub-search-([0-9a-z]+)-.*/,"$1"),hub=splash.cmsComponentManager.getComponentInstance(hubId);if(hub&&"hub"===hub.getType()){if("is_featured"===searchMode)hub.setTemporaryFilter({type:"featured",options:1},cmsComponent).filterHub();else if("search_terms"===searchMode){searchTerm="button"===cmsComponent.getType()?cmsComponent.getHubSearchTerm():$t.attr("data-search-terms")?$t.attr("data-search-terms"):"",hub.setTemporaryFilter({type:"keywords",options:searchTerm},cmsComponent).filterHub()}else if("tags_filter"===searchMode){var searchTerm;searchTerm="button"===cmsComponent.getType()?cmsComponent.getHubSearchTerm():$t.attr("data-search-terms")?$t.attr("data-search-terms"):"",hub.setTemporaryFilter({type:"tags",options:searchTerm},cmsComponent).filterHub()}else hub.removeTemporaryFilter(cmsComponent),hub.sortHub(searchMode,null);return!1}var $hub=$("#splash-container").find(".sf.ohmyhub[hubId="+hubId+"]"),sfid=$hub.attr("id").replace("sfid-","");if($hub.length&&0===searchMode.indexOf("is_"))splash.ohmyhub.hideShowHubItemByProperty(sfid,searchMode,!0);else if("search_terms"===searchMode){var searchTerms=$t.attr("data-search-terms")?$t.attr("data-search-terms"):"";splash.ohmyhub.searchHub(sfid,searchTerms,{wordMatchingType:"whole_word"})}else splash.ohmyhub.sortHub(sfid,searchMode);return!1}if("#exit-custom-reg"===jumpTo)return alert("Would exit custom registration flow"),!1}if($s.length>0){if($t.parents(".tt-content").length>0){$s.parents(".sf:first");$t.parents(".tt-content").find("div[block-type='full-list']").each(function(){$(this).parents(".layoutGrp:first").hide()}),$s.parents(".layoutGrp:first").show(),$t.parents(".nav-item:first").addClass("active").siblings().removeClass("active")}else $t.parents(".nav-item:first").addClass("active").siblings().removeClass("active"),scrollToBlock($s,{force:!0,percentageOffset:50,toBlockTop:!0,pulse:!1});return!1}if("#to301527"===jumpTo)$s=$("#main-canvas").find(".sf[block-type='content']:first");else if("#to301542"===jumpTo)$s=$("#main-canvas").find(".sf[block-type='list']:first");else if("#to306859"===jumpTo&&(($s=$("#main-canvas").find(".element-gallery:last")).length<1||!$s.is(":visible")))var $s=$("#main-canvas").find(".sf[block-type='images']:first");void 0!==$s&&$s.length>0&&scrollToBlock($s,{force:!0,pulse:!1,percentageOffset:25})}else{var isLinkTag=$t.is("a");if(isLinkTag&&"undefined"===$t.attr("target"))window.open(jumpTo),event.preventDefault();else if(isLinkTag||"_self"!==$t.attr("data-target"))if(isLinkTag||"_parent"!==$t.attr("data-target"))isLinkTag||window.open(jumpTo);else try{window.parent.location=jumpTo}catch(err){window.open(jumpTo)}else takeLinkActionToTopLevelFrameIfNeeded(jumpTo,event)||(window.location=jumpTo)}}function getDistanceFromLatLon(lat1,lon1,lat2,lon2){var dLat=deg2rad(lat2-lat1),dLon=deg2rad(lon2-lon1),a=Math.sin(dLat/2)*Math.sin(dLat/2)+Math.cos(deg2rad(lat1))*Math.cos(deg2rad(lat2))*Math.sin(dLon/2)*Math.sin(dLon/2);return 3959*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))}function deg2rad(deg){return deg*(Math.PI/180)}function autoFontResize($container){if($container||($container=$("#main-canvas")),"function"==typeof $.fn.bigtext){"function"!=typeof $container.bigtext&&($container=$($container));var $paragraphResizes=$container.find(".splash-font-resizing[data-font-resizing-mode=paragraph]").addBack(".splash-font-resizing[data-font-resizing-mode=paragraph]"),$lineResizes=$container.find(".splash-font-resizing[data-font-resizing-mode=line]").addBack(".splash-font-resizing[data-font-resizing-mode=line]");$paragraphResizes.length&&$paragraphResizes.removeClass("no-op-children").children(".element").find("[data-mce-style]").css({"font-size":"","line-height":""}).end().bigtext({resize:!0}),$lineResizes.length&&$lineResizes.removeClass("no-op-children").find(".body:first,.title:first").find("[data-mce-style]").css({"font-size":"","line-height":""}).end().bigtext({resize:!0})}}function clearFontResizeClasses($container){$container||($container=$("#main-canvas")),$container.find("div,span,p").addBack().each(function(){var $this=$(this),id=$this.attr("id"),classes=$this.attr("class");/bigtext/.test(id)&&$this.removeAttr("id"),classes&&(classes=classes.replace(new RegExp("\\b"+BigText.LINE_CLASS_PREFIX+"\\d+\\b"),"").replace(/\bbigtext\b/,""),$this.attr("class",classes))})}splash.geo=function($){var geolocatingMe=!1,ip="",country_code="",country_name="",region_code="",region_name="",city="",zipcode="",latitude="",longitude="",timezone="",status="",errorMsg="",successCallbacks=[],failCallbacks=[],_callbacks=function(result){if(void 0===result&&(result={ip:ip,country_code:country_code,country_name:country_name,region_code:region_code,city:city,zipcode:zipcode,address:"",latitude:latitude,longitude:longitude,status:status,timezone:timezone}),"success"==result.status&&successCallbacks.length){for(;successCallbacks.length>0;)successCallbacks.shift()(result);failCallbacks=[]}else if(failCallbacks.length>0){for(;failCallbacks.length>0;)failCallbacks.shift()(errorMsg);successCallbacks=[]}},_telize=function(){geolocatingMe=!0;var apiKey=splash.server.constants.mashapeKey?splash.server.constants.mashapeKey:"";$.ajax({url:"https://telize-v1.p.mashape.com/geoip?mashape-key="+apiKey,timeout:5e3}).success(function(response){void 0!==response.latitude&&void 0!==response.longitude?(ip=response.ip,country_code=response.country_code,country_name=response.country,region_name=response.region_name,region_code=response.region_code,city=response.city,zipcode=response.postal_code,latitude=response.latitude,longitude=response.longitude,timezone=response.timezone,status="success"):errorMsg="Splash geolocateMe() response: "+response,geolocatingMe=!1,_callbacks()}).fail(function(xhr,options,error){geolocatingMe=!1,errorMsg="Splash geolocateMe() response: "+xhr.status+" - "+error,_callbacks()})};return{geolocateMe:function(){return geolocatingMe?this:(""==ip?_telize():setTimeout(_callbacks,0),this)},geocode:function(term){return $.ajax({url:"https://maps.googleapis.com/maps/api/geocode/json?address="+term,type:"POST",dataType:"json"}).success(function(response){var result={};if(void 0!==response.status&&"ZERO_RESULTS"==response.status)return errorMsg="Splash geocode() error: no results",void _callbacks();if(void 0===response.results||void 0===response.results[0]||void 0===response.results[0].geometry||void 0===response.results[0].geometry.location)return errorMsg="Splash geocode() error: incomplete response",void _callbacks();var place=response.results[0];if(result.ip="",result.latitude=place.geometry.location.lat,result.longitude=place.geometry.location.lng,place.address_components){for(var i in place.address_components)"postal_code"==place.address_components[i].types[0]?result.zipcode=place.address_components[i].long_name:"street_number"==place.address_components[i].types[0]?result.street_number=place.address_components[i].long_name:"route"==place.address_components[i].types[0]?result.route=place.address_components[i].long_name:"locality"==place.address_components[i].types[0]?result.city=place.address_components[i].long_name:"administrative_area_level_1"==place.address_components[i].types[0]?(result.region_name=place.address_components[i].long_name,result.region_code=place.address_components[i].short_name):"country"==place.address_components[i].types[0]&&(result.country_name=place.address_components[i].long_name,result.country_code=place.address_components[i].short_name);result.address=result.street_number+" "+result.street_name}place.formatted_address&&(result.formatted_address=place.formatted_address),result.status="success",_callbacks(result)}).fail(function(xhr,options,error){errorMsg="Splash geocode() response: "+xhr.status+" - "+error,_callbacks()}),this},success:function(newSuccessCallback){return"function"==typeof newSuccessCallback&&successCallbacks.push(newSuccessCallback),this},fail:function(newFailCallback){return"function"==typeof newFailCallback&&failCallbacks.push(newFailCallback),this}}}(jQuery),window.splash.ohmyhub=function($){var _h={},_setDataStructures=function(hub_sfid){_h[hub_sfid]=_h[hub_sfid]?_h[hub_sfid]:{},_h[hub_sfid].events=_h[hub_sfid].events?_h[hub_sfid].events:{},_h[hub_sfid].sorting=_h[hub_sfid].sorting?_h[hub_sfid].sorting:[],_h[hub_sfid].opts=_h[hub_sfid].opts?_h[hub_sfid].opts:{},_h[hub_sfid].displayMode=_h[hub_sfid].displayMode?_h[hub_sfid].displayMode:"",_h[hub_sfid].masterCard=_h[hub_sfid].masterCard?_h[hub_sfid].masterCard:$()},_generateSortingArray=function(hub_sfid,sort_field,sortParams){sortParams=sortParams||{},"distance"==sort_field&&(sortParams.latitude=sortParams.latitude?sortParams.latitude:0,sortParams.longitude=sortParams.longitude?sortParams.longitude:0);var sorting_tmp={};Object.keys(_h[hub_sfid].events).length;for(var hub_item_id in _h[hub_sfid].events){"distance"==sort_field&&_updateCoords(hub_sfid,hub_item_id,_h[hub_sfid].events[hub_item_id],sortParams.latitude,sortParams.longitude);var sort_index;if(-1!==sort_field.indexOf(".")){var sort_fields=sort_field.split(".");sort_index=_h[hub_sfid].events[hub_item_id][sort_fields[0]][sort_fields[1]]}else sort_index=_h[hub_sfid].events[hub_item_id][sort_field];"string"==typeof sort_index&&(sort_index=sort_index.trim()),""==sort_index&&(sort_index=1e14+Math.floor(1e3*Math.random())),"distance"==sort_field&&(sort_index=Math.floor(10*sort_index)),"sort_order"==sort_field&&(void 0===sort_index&&(sort_index=999),sort_index=("0000"+sort_index).slice(-4));for(var i=0,new_sort_index=sort_index;void 0!==sorting_tmp[new_sort_index];)new_sort_index="number"==typeof sort_index?sort_index+i:sort_index+"-"+i,i++;sorting_tmp[sort_index=""==new_sort_index?sort_index:new_sort_index]=hub_item_id}_h[hub_sfid].sorting=[],Object.keys(sorting_tmp).sort(function(A,B){if(isNaN(A)){var a=A.toLowerCase().replace(/\s/g,""),b=B.toLowerCase().replace(/\s/g,"");return a<b?-1:a==b?0:1}return parseInt(A)-parseInt(B)}).forEach(function(k){_h[hub_sfid].sorting.push(sorting_tmp[k])}),(sortParams.sort_order&&"reverse"==sortParams.sort_order||"rsvp_count"==sort_field)&&(_h[hub_sfid].sorting=_h[hub_sfid].sorting.reverse())},_afterHubRender=function($hub_sf,hub_sfid,renderParams){window.splash.ohmyhub.getMasterCard(hub_sfid).find(".card-distance").length&&window.splash.geo.geolocateMe().success(function(response){for(var hub_item_id in _h[hub_sfid].events)({}).hasOwnProperty.call(_h[hub_sfid].events,hub_item_id)&&(_updateCoords(hub_sfid,hub_item_id,_h[hub_sfid].events[hub_item_id],response.latitude,response.longitude),window.splash.ohmyhub.updateEventCard($("#shid-"+hub_sfid+"-"+hub_item_id),_h[hub_sfid].events[hub_item_id]))}),"function"==typeof window.customAfterHubRender&&window.customAfterHubRender($hub_sf.attr("id"),renderParams),$hub_sf.find(".ohmyhub-item").css("display",_h[hub_sfid].displayMode),_h[hub_sfid].matchHeight&&window.matchHeight($hub_sf.closest(".layoutGrp"))},_afterSearchEventHub=function(matchingIds,hub_sfid,callback){"function"==typeof callback&&setTimeout(function(){callback(matchingIds)},0),"function"==typeof window.customAfterHubSearch&&window.customAfterHubSearch(matchingIds)},_updateCoords=function(hub_sfid,hub_item_id,hub_item_info,my_lat,my_lng){if(void 0!==hub_item_info&&hub_item_info.venue.lat&&hub_item_info.venue.lng){var distance=window.getDistanceFromLatLon(my_lat,my_lng,hub_item_info.venue.lat,hub_item_info.venue.lng);isNaN(distance)?_h[hub_sfid].events[hub_item_id].distance="":_h[hub_sfid].events[hub_item_id].distance=distance}else _h[hub_sfid].events[hub_item_id].distance=""},_geolocateMeIfNecessary=function(hub_sfid){var needToGeolocate=!1;"distance"==_h[hub_sfid].opts.sort_field?needToGeolocate=!0:window.splash.ohmyhub.getMasterCard(hub_sfid).find(".card-distance").length&&(needToGeolocate=!0),needToGeolocate&&window.splash.geo.geolocateMe()},_updateMatchHeightProperty=function(hub_sfid,$masterCard){if($masterCard.hasClass("ohmyhub-match-height")){var matchHeightsMode=$masterCard.attr("match-height");$("#sfid-"+hub_sfid).closest(".layoutGrp").addClass("match-height").attr("match-height",matchHeightsMode),_h[hub_sfid].matchHeight=matchHeightsMode}else _h[hub_sfid].matchHeight="",$("#sfid-"+hub_sfid).closest(".layoutGrp").removeClass("match-height").attr("match-height","")},_getFrontendCardLimit=function(hub_sfid){return _h[hub_sfid]&&_h[hub_sfid].opts&&_h[hub_sfid].opts.render_cards_limit?_h[hub_sfid].opts.render_cards_limit:75},_hideCard=function($hub_item){$hub_item.addClass("is-hidden")},_showCard=function($hub_item){$hub_item.removeClass("is-hidden")};return{get:function(hub_sfid,object,hub_item_id,property){return null==hub_sfid?_h:null==object?void 0!==_h[hub_sfid]?_h[hub_sfid]:null:null==hub_item_id?void 0!==_h[hub_sfid][object]?_h[hub_sfid][object]:null:null==property?void 0!==_h[hub_sfid][object][hub_item_id]?_h[hub_sfid][object][hub_item_id]:null:void 0!==_h[hub_sfid][object][hub_item_id][property]?_h[hub_sfid][object][hub_item_id][property]:null},setEvents:function(sfid,eventsData){_setDataStructures(sfid),_h[sfid].events=eventsData},setEvent:function(hub_sfid,hub_item_id,eventData){_h[hub_sfid].events[hub_item_id]=eventData},setHubItemProperties:function(hub_sfid,hub_item_id,properties){for(var name in properties)({}).hasOwnProperty.call(properties,name)&&(_h[hub_sfid].events[hub_item_id][name]=properties[name])},setOptions:function(sfid,hub_opts){void 0!==_h[sfid]?void 0===_h[sfid].opts?_h[sfid].opts=hub_opts:$.extend(_h[sfid].opts,hub_opts):_h[sfid]={opts:hub_opts}},setOption:function(sfid,option_key,option_value){void 0===_h[sfid]?_h[sfid]={opts:{}}:void 0===_h[sfid].opts&&(_h[sfid].opts={}),_h[sfid].opts[option_key]=option_value},getOption:function(sfid,option_key){if(void 0!==_h[sfid]&&void 0!==_h[sfid].opts)return _h[sfid].opts[option_key]},getOptions:function(sfid){return _h[sfid]?_h[sfid].opts:{}},updateHubItemId:function(hub_sfid,old_id,new_id){if(void 0!==_h[hub_sfid]&&void 0!==_h[hub_sfid].events[old_id]){_h[hub_sfid].events[new_id]=_h[hub_sfid].events[old_id],delete _h[hub_sfid].events[old_id];for(var i in _h[hub_sfid].sorting)if(_h[hub_sfid].sorting[i]==old_id){_h[hub_sfid].sorting[i]=new_id;break}$("#shid-"+hub_sfid+"-"+old_id).attr("id","shid-"+hub_sfid+"-"+new_id)}},deleteHubItem:function(hub_sfid,hub_item_id){if(void 0!==_h[hub_sfid]&&void 0!==_h[hub_sfid].events[hub_item_id]){delete _h[hub_sfid].events[hub_item_id];for(var i in _h[hub_sfid].sorting)if(_h[hub_sfid].sorting[i]==hub_item_id){delete _h[hub_sfid].sorting[i];break}0==_h[hub_sfid].sorting.length&&$("#sfid-"+hub_sfid).addClass("no-events")}},initAll:function(){$.each($("#splash-container .sf.ohmyhub"),function(){window.splash.ohmyhub.init($(this))}),window.splash.ohmyhub.bind()},init:function($hub,initOptions){var hub_sfid,hubId;if("number"==typeof $hub||"string"==typeof $hub)hub_sfid=""+$hub.replace("sfid-",""),hubId=$("#sfid-"+hub_sfid).attr("hubId");else{if(!($hub.length>0))return void window.splash.analytics.trackError("o410","Trying to init a hub, but no valid parameter passed");hub_sfid=$hub.attr("id").replace("sfid-",""),hubId=$hub.attr("hubId")}initOptions=initOptions||{};var sortParams={},get_params=window.getQueryParams(window.location.search);if(get_params){for(var key in get_params)({}).hasOwnProperty.call(get_params,key)&&(initOptions[key]=get_params[key],sortParams[key]=get_params[key]);initOptions.event_id=window.splash.server.constants.event_id}_setDataStructures(hub_sfid),_geolocateMeIfNecessary(hub_sfid),window.splash.ohmyhub.getHubItems(hub_sfid,hubId,initOptions,function(hub_sfid){_h[hub_sfid].opts.sort_order&&"reverse"==_h[hub_sfid].opts.sort_order&&(sortParams.sort_order="reverse");var sortField;sortField=sortParams.sort_field?sortParams.sort_field:_h[hub_sfid].opts.sort_field,window.splash.ohmyhub.sortHubData(hub_sfid,sortField,sortParams,function(hub_sfid){if(get_params.search_field){var $searchBarAssociatedSf=window.splash.ohmyhub.getSearchBarForHub(hubId).find(".sf:first");$searchBarAssociatedSf.length&&$searchBarAssociatedSf.addClass("is-searching").find(".search-bar-input").val(get_params.search_field),initOptions.needs_render=!0,window.splash.ohmyhub.searchHub(hub_sfid,get_params.search_field,initOptions,function(){$searchBarAssociatedSf.length&&$searchBarAssociatedSf.removeClass("is-searching")})}else window.splash.ohmyhub.renderHub(hub_sfid)})})},getHubItems:function(hub_sfid,hubId,getItemsOptions,callback){if(null!=getItemsOptions&&void 0!==getItemsOptions.useCurrentData&&getItemsOptions.useCurrentData)"function"==typeof callback&&callback(hub_sfid);else{var hubIdUsed=hubId;_h[hub_sfid].opts.linked_hub_id&&(hubIdUsed=_h[hub_sfid].opts.linked_hub_id);var parameters={};parameters.action="ohmyhub",parameters.method="getItems",parameters.format="json",parameters.splash_hub_id=hubIdUsed,parameters.splash_feed_id=hub_sfid,parameters.options=getItemsOptions,window.splash.server.constants.finetune&&(parameters.formatParams={finetune:!0}),$.ajax({type:"GET",url:window.location.pathname,data:parameters}).done(function(response,status){void 0===response.result?window.splash.analytics.trackError("o494","Tried to get elements for a hub, but the response result was empty"):(_h[hub_sfid].events=window._.object(window._.map(response.result,function(thisEventInfo){return[thisEventInfo.hub_item_id,thisEventInfo]})),window._.each(_h[hub_sfid].events,function(thisEventData){thisEventData.created_timestamp=isNaN(parseInt(thisEventData.created_timestamp))?thisEventData.created_timestamp:1e3*parseInt(thisEventData.created_timestamp),thisEventData.date&&(thisEventData.date.start_timestamp=isNaN(parseInt(thisEventData.date.start_timestamp))?thisEventData.date.start_timestamp:1e3*parseInt(thisEventData.date.start_timestamp),thisEventData.date.end_timestamp=isNaN(parseInt(thisEventData.date.end_timestamp))?thisEventData.date.end_timestamp:1e3*parseInt(thisEventData.date.end_timestamp))}),"function"==typeof callback&&callback(hub_sfid))}).fail(function(xhr,options,error){window.splash.analytics.trackError("o508","Bad response trying to get elements for a hub")})}},renderHub:function(hub_sfid,renderParams){var $sf;if(null==hub_sfid){if(0==($sf=$("#splash-container").find(".sf.ohmyhub:first")).length)return void window.splash.analytics.trackError("o534","Tried to render a hub, but no hub found. hub_sfid was null, and no hub found on page");hub_sfid=$sf.attr("id").replace("sfid-",""),window.splash.analytics.trackError("o537","Warning, render hub is rendering the first hub on page, but that should not happen")}else if(0==($sf=$("#sfid-"+hub_sfid)).length)return void window.splash.analytics.trackError("o537","Tried to render a hub, but no hub found. hub_sfid was set, but no hub for it was found");renderParams=renderParams||{};var hub_items_main=[],hub_items_featured=[],cardLimit=_getFrontendCardLimit(hub_sfid),cardCount=0,$layout=window.splash.ohmyhub.getMasterCardTemplate($sf);if(0==$layout.length)return window.splash.ohmyhub.setHubStatus($sf,"master-card-error"),void window.splash.analytics.trackError("o594","Couldn't find master card when rendering a hub");for(var hub_item_sorting_index in _h[hub_sfid].sorting)if({}.hasOwnProperty.call(_h[hub_sfid].sorting,hub_item_sorting_index)){var hub_item_id=_h[hub_sfid].sorting[hub_item_sorting_index];if(cardCount>=cardLimit){if(!renderParams.cache_items)break;_h[hub_sfid].events[hub_item_id].is_rendered&&_hideCard($("#shid-"+hub_sfid+"-"+hub_item_id))}else if(!renderParams.maxDistance||!(""==_h[hub_sfid].events[hub_item_id].distance||_h[hub_sfid].events[hub_item_id].distance>renderParams.maxDistance))if(renderParams.matchingIds&&-1===renderParams.matchingIds.indexOf(hub_item_id))_h[hub_sfid].events[hub_item_id].is_rendered&&_hideCard($("#shid-"+hub_sfid+"-"+hub_item_id));else{var $hub_item;renderParams.cache_items&&_h[hub_sfid].events[hub_item_id].is_rendered?($hub_item=$("#shid-"+hub_sfid+"-"+hub_item_id),$hub_item=window.splash.ohmyhub.updateEventCard($hub_item,_h[hub_sfid].events[hub_item_id]),_showCard($hub_item)):$hub_item=window.splash.ohmyhub.populateHubCardTemplate($layout.clone(!0).off(),_h[hub_sfid].events[hub_item_id],hub_item_id,hub_sfid),_h[hub_sfid].opts.filter_featured&&"always_first"==_h[hub_sfid].opts.filter_featured&&_h[hub_sfid].events[hub_item_id].is_featured?hub_items_featured.push($hub_item):hub_items_main.push($hub_item),_h[hub_sfid].events[hub_item_id].is_rendered=!0,cardCount++}}if(renderParams.cache_items||$sf.find(">.children > .ohmyhub-item").remove(),0==_h[hub_sfid].sorting.length)window.splash.ohmyhub.setHubStatus($sf,"empty");else if(0==cardCount)window.splash.ohmyhub.setHubStatus($sf,"no-results");else{window.splash.ohmyhub.setHubStatus($sf,"results"),$sf.children(".children").append(hub_items_featured).append(hub_items_main);var component=window.splash.cmsComponentManager.getComponentInstance($sf.closest(".layoutGrp"));component&&"function"==typeof component.addOnHoverTools&&"function"==typeof component.removeOnHoverTools&&component.removeOnHoverTools().addOnHoverTools(),$layout.hasClass("linkable-cards")&&window.splash.navElement.bindLinkableContainers()}_afterHubRender($sf,hub_sfid,renderParams)},getMasterCard:function(hub_sfid,force){if("object"==typeof hub_sfid)hub_sfid=hub_sfid.attr("id").replace("sfid-","");else if("string"==typeof hub_sfid)hub_sfid=hub_sfid.replace("sfid-","");else if(void 0===hub_sfid)return $();var $masterCard,hubId=_h[hub_sfid].opts.splash_hub_id;if(!force&&void 0!==_h[hub_sfid].masterCard&&_h[hub_sfid].masterCard.length)return $masterCard=_h[hub_sfid].masterCard,_updateMatchHeightProperty(hub_sfid,$masterCard),$masterCard;var activeCard;return activeCard=void 0!==_h[hub_sfid].opts.active_card_id?_h[hub_sfid].opts.active_card_id:1,0==($masterCard=$("#main-canvas").find(".event-hub-master-card[hubId="+hubId+"][cardLayoutId="+activeCard+"]").last()).length&&($masterCard=$("#main-canvas").find(".event-hub-master-card[hubId="+hubId+"]").last()),_updateMatchHeightProperty(hub_sfid,$masterCard),_h[hub_sfid].masterCard=$masterCard,$masterCard},getMasterCardTemplate:function($hub_sf){var sfid=$hub_sf.attr("id").replace("sfid-",""),$masterCard=window.splash.ohmyhub.getMasterCard(sfid);if(void 0!==$masterCard.attr("style")){var matches=$masterCard.attr("style").match(/display:[\s]?([a-z-]+)/);matches&&void 0!==matches[1]&&(_h[sfid].displayMode=void 0!==matches[0]?matches[1]:"")}else _h[sfid].displayMode="";var $layout=$masterCard.clone(!0).off();return $layout.removeAttr("cardLayoutId block_type hubId id").removeClass("event-hub-master-card").addClass("ohmyhub-item list-item"),$layout.find(".layoutGrp").addBack(".layoutGrp").each(function(){var $this=$(this);$this.attr("data-master-gid",$this.attr("id"))}),$layout.removeClass("layoutGrp").find(".layoutGrp").addClass("cardLayoutGrp").removeAttr("id").removeClass("layoutGrp").attr("data-lock","full").end().find("a.nav-jump").removeAttr("id").end().find(".element").removeAttr("id").end().find(".sf").removeAttr("id").end().find(".not-edited").removeClass("not-edited").end().find("style").remove().end().find(".not-edited").removeClass("not-edited").end().find(".edit-tools").remove().end().find(".add-placeholder").remove(),$layout},populateHubCardTemplate:function($layout,info,hub_item_id,hub_sfid){info.date.tbd,""!=info.date.start&&new Date(info.date.start),""!=info.end&&new Date(info.date.end),new Date;$layout.attr("event-id",info.event_id).attr("id","shid-"+hub_sfid+"-"+hub_item_id);var event_domain=info.domain;void 0!==window.splash.server._user&&window.splash.server._user.id&&(event_domain+="?preview");var $title=$layout.find(".card-title"),$description=$layout.find(".card-description"),$image=$layout.find(".card-image"),$bgImage=$layout.filter(".card-bg-image").add($layout.find(".card-bg-image")),$eventDate=$layout.find(".card-event-date"),$eventVenue=$layout.find(".card-event-venue"),$buttonLinks=$layout.find(".button-link"),$tagList=$layout.find(".card-tag-list");if($title.length&&$title.find(".title, .body").text(info.title),$description.length&&$description.find(".title, .body").text(info.description),$image.length&&""!=info.image_url&&$image.find("img").attr("src",info.image_url),$bgImage.length&&""!=info.image_url&&$bgImage.css("background-image",'url("'+info.image_url+'")'),$buttonLinks.length&&$buttonLinks.each(function(){var $a=$(this);"#go-to-event"==$a.attr("href")?$layout.hasClass("linkable-cards")&&info.domain?$a.attr("href","#"):$a.attr("href",event_domain):"#map-it"==$a.attr("href")&&$a.attr("href",window.splash.ohmyhub.generateExternalMapsLinkFromVenue(info.venue))}),window.splash.dateElement.updateDate($eventDate,info.date),window.splash.venueElement.updateVenue($eventVenue,info.venue),""!=info.rsvp_status&&$layout.addClass("card-rsvp-"+info.rsvp_status),""!=info.event_status&&$layout.addClass("card-event-"+info.event_status),"1"==info.is_featured&&$layout.addClass("card-is-featured"),"1"==info.is_external&&$layout.addClass("card-is-external"),info.tags&&info.tags.length){var tagClasses="",tagListBody="";for(var i in info.tags)if({}.hasOwnProperty.call(info.tags,i)){var tag=info.tags[i].replace(/\s/g,"-");tag&&(tagClasses+="card-tag-"+tag+" ",tagListBody+='<div class="card-tag-list-item">'+tag+"</div>")}$tagList.length&&$tagList.find(".title, .body").html(tagListBody),$layout.addClass(tagClasses.trim().toLowerCase().replace(/[^\sa-z0-9-]+/g,""))}return $layout.hasClass("linkable-cards")&&info.domain&&$layout.data("href",event_domain).data("target",_h[hub_sfid].opts.linkable_cards).addClass("linkable-ele").attr("linked","true"),$layout=window.splash.ohmyhub.updateEventCard($layout,info)},updateEventCard:function($layout,info){var $distanceTexts=$layout.find(".card-distance");return $distanceTexts.length&&""!=info.distance&&$distanceTexts.text(Math.round(10*info.distance)/10+" Miles"),$layout},sortHub:function(hub_sfid,sort_field,sortParams,callback){hub_sfid=hub_sfid.replace("sfid-",""),window.splash.ohmyhub.sortHubData(hub_sfid,sort_field,sortParams,function(hub_sfid){window.splash.ohmyhub.renderHub(hub_sfid),"function"==typeof callback&&callback(hub_sfid)})},sortHubData:function(hub_sfid,sort_field,sortParams,callback){if(sort_field=sort_field||"sort_order",sortParams=sortParams||{},"distance"!=sort_field)_generateSortingArray(hub_sfid,sort_field,sortParams),"function"==typeof callback&&callback(hub_sfid);else{void 0!==sortParams.location&&""!=sortParams.location?window.splash.geo.geocode(sortParams.location).success(function(response){void 0!==response&&void 0!==response.latitude&&void 0!==response.longitude?(sortParams.latitude=response.latitude,sortParams.longitude=response.longitude,_generateSortingArray(hub_sfid,sort_field,sortParams),"function"==typeof callback&&callback(hub_sfid)):window.splash.ohmyhub.sortHubData(hub_sfid,"date.start_timestamp",sortParams,callback)}).fail(function(response){window.splash.ohmyhub.sortHubData(hub_sfid,"date.start_timestamp",sortParams,callback)}):window.splash.geo.geolocateMe().success(function(response){void 0!==response&&void 0!==response.latitude&&void 0!==response.longitude?(sortParams.latitude=response.latitude,sortParams.longitude=response.longitude,_generateSortingArray(hub_sfid,sort_field,sortParams),"function"==typeof callback&&callback(hub_sfid)):window.splash.ohmyhub.sortHubData(hub_sfid,"date.start_timestamp",sortParams,callback)}).fail(function(response){window.splash.ohmyhub.sortHubData(hub_sfid,"date.start_timestamp",sortParams,callback)})}},searchHub:function(hub_sfid,term,searchParams,callback){term=term||"",searchParams=searchParams||{},hub_sfid=hub_sfid.replace("sfid-","");var $sf=$("#sfid-"+hub_sfid);window.splash.ohmyhub.setHubStatus($sf,"loading"),searchParams.searchMode&&"sort-by-distance"==searchParams.searchMode?window.splash.ohmyhub.sortHubData(hub_sfid,"distance",{location:term},function(hub_sfid){window.splash.ohmyhub.renderHub(hub_sfid,searchParams),_afterSearchEventHub(null,0,callback)}):window.splash.ohmyhub.searchHubData(hub_sfid,term,searchParams,function(hub_sfid,term,searchParams,matchingIds){matchingIds.length>0?window.splash.ohmyhub.setHubStatus($sf,"results"):window.splash.ohmyhub.setHubStatus($sf,"no-results"),window.splash.ohmyhub.renderHub(hub_sfid,{cache_items:!0,matchingIds:matchingIds,searching:!0}),_afterSearchEventHub(matchingIds,0,callback)})},searchHubData:function(hub_sfid,term,searchParams,callback){term=term?term.toLowerCase().trim():"",searchParams=searchParams||{};var terms=[];if(""==term.trim()||"boskoff"==term)terms.push(" ");else if(searchParams.wordMatchingType&&"whole_sentence"==searchParams.wordMatchingType)terms.push(term);else if(searchParams.wordMatchingType&&"whole_word"==searchParams.wordMatchingType){terms=term.split(" ");for(var i in terms)({}).hasOwnProperty.call(terms,i)&&(terms[i]=" "+terms[i]+" ")}else terms=term.split(" ");var matchingIds=[];for(var j in terms)if({}.hasOwnProperty.call(terms,j)){var re=new RegExp("("+RegExp.escape(terms[j])+")");for(var hub_item_id in _h[hub_sfid].events)(" "+_h[hub_sfid].events[hub_item_id].search_terms+" ").match(re)&&-1===matchingIds.indexOf(hub_item_id)&&matchingIds.push(hub_item_id)}callback(hub_sfid,term,searchParams,matchingIds)},hideShowHubItemByProperty:function(hub_sfid,propertyName,propertyValue){if(void 0!==_h[hub_sfid]){var matchingIds=[];for(var sfid in _h[hub_sfid].events)_h[hub_sfid].events[sfid][propertyName]==propertyValue&&matchingIds.push(sfid);window.splash.ohmyhub.renderHub(hub_sfid,{cache_items:!0,matchingIds:matchingIds,searching:!0})}},getEventHubItemIds:function(hub_sfid){var event_ids={};if(!_h[hub_sfid].events)return event_ids;for(var shid in _h[hub_sfid].events)({}).hasOwnProperty.call(_h[hub_sfid].events,shid)&&(event_ids[_h[hub_sfid].events[shid].event_id]=shid);return event_ids},getRsvpCounts:function($sf){},getComments:function($sf,limit){},applyModeStyling:function($block,modeVal){},applyModeStylingSingle:function($hub_item,modeVal){},classifyNearbyEvents:function($sf,className,maxDistance,_callback){},setHubStatus:function($sf,statusClass){$sf.attr("data-status",statusClass),"function"==typeof window.customSetHubStatusLegacy&&window.customSetHubStatusLegacy($sf,statusClass)},getHubStatus:function($sf){var matches=$sf.attr("class").match(/status-([0-9a-z]+)/);if(void 0!==matches[1])return matches[1]},makeHubLinkable:function(sfid){$("#sfid-"+sfid).find(".children:first").find(".ohmyhub-item").each(function(){$(this).attr("id").replace(/shid-[0-9]+-/,"");$(this).addClass("linkable-ele")})},generateIframeMapsLinkFromVenue:function(venue){if(venue.tbd)return"https://www.google.com/maps/embed/v1/place?zoom=2&q=0,0&key=AIzaSyBIqWC2aJaQ3-rDPCJDS9wKKCrrASJ42Us";var venueString="";return venue.address?venueString+=venue.address?venue.address.replace(/[,\s]+[0-9]+[a-z\s]*(floor|apt)/i,"")+",":"":venue.name&&(venueString+=venue.name?venue.name+",":""),venueString+=venue.city?venue.city+",":"",venueString+=venue.state?venue.state+",":"",venueString+=venue.country?venue.country+",":"","https://www.google.com/maps/embed/v1/place?zoom=15&q="+encodeURI(venueString)+"&key=AIzaSyBIqWC2aJaQ3-rDPCJDS9wKKCrrASJ42Us"},generateExternalMapsLinkFromVenue:function(venue){if(venue.tbd)return"https://www.google.com/maps/place/0,0";var venueString="";return venue.address?venueString+=venue.address?venue.address.replace(/[,\s]+[0-9]+[a-z\s]*(floor|apt)/i,"")+",":"":venue.name&&(venueString+=venue.name?venue.name+",":""),venueString+=venue.city?venue.city+",":"",venueString+=venue.state?venue.state+",":"",venueString+=venue.country?venue.country+",":"","https://www.google.com/maps/place/"+encodeURI(venueString)},bind:function(){window.splash.ohmyhub.bindHub(),window.splash.ohmyhub.bindSearchBar()},bindHub:function($hubLayoutGrp){null==$hubLayoutGrp&&($hubLayoutGrp=$("#splash-container").find(".layoutGrp.ohmyhub"));var $body=$("body"),sortableStart=function(event,ui){$body.addClass("isDragging")},sortableUpdate=function(event,ui){$body.removeClass("isDragging");var movedGroupId=ui.item[0].id,$movedGroup=$("#"+movedGroupId),$prevGroup=$movedGroup.prev(".layoutGrp"),$movedFt=$("#ft"+movedGroupId);if($prevGroup.length>0){var prevGroupId=$prevGroup.attr("id");$("#ft"+prevGroupId).after($movedFt)}else{var parentId=$movedGroup.parents(".layoutGrp:first").attr("id");$("#ft"+parentId).children(".accordion").after($movedFt)}};$hubLayoutGrp.sortable({connectWith:".ohmyhub",items:".ohmyhub-item",handle:".drag-handle",cancel:".noDrag",scroll:!0,helper:function(event,element){return element.clone().appendTo("#hub-mastercard-workspace")},start:function(event,ui){sortableStart(),$body.addClass("partial-drag-lock")},stop:function(event,ui){var huborder=[],ohmyhubitems=[],hub_id=$(this).attr("id").replace("sfid-","");window.splash.ohmyhub.get(hub_id);ohmyhubitems.push($(this).find(".children").find(".ohmyhub-item"));for(var i=0;i<ohmyhubitems[0].length;i++){var hubid=ohmyhubitems[0][i].id;huborder.push(hubid.replace("sfid-",""))}$body.removeClass("partial-drag-lock"),_h[hub_id].sorting=huborder,window.splash.ohmyhub.renderHub(hub_id),window.splash.PubSub.publish("page-changes-made","layout"),huborder=[]},update:function(event,ui){sortableUpdate(0,ui)}})},getSearchBarForHub:function(hub_id){return $("#splash-container").find('.ohmyhub-search[hubId="'+hub_id+'"]')},bindSearchBar:function($searchBarSf){null==$searchBarSf&&($searchBarSf=$("#splash-container").find(".search-bar"));var $searchBarInput=$searchBarSf.find(".search-bar-input");$searchBarInput.on("keyup",function(e){if(13==e.keyCode){var $search=$(this),term=$search.val(),$searchBlock=$search.closest(".sf"),hubId=$search.closest(".layoutGrp").attr("hubId"),$block=$(".sf.ohmyhub[hubId="+hubId+"]"),searchParams=$search.data();if(!$block.length)return!1;$searchBlock.addClass("is-searching"),setTimeout(function(){window.splash.ohmyhub.searchHub($block.attr("id"),term,searchParams,function(){$searchBlock.removeClass("is-searching")})},0)}}),$searchBarSf.find(".search-bar-button").on("click",function(e){var $search=$(this).closest(".ohmyhub-search").find(".search-bar-input"),term=$search.val(),$searchBlock=$search.closest(".sf"),hubId=$search.closest(".layoutGrp").attr("hubId"),$block=$(".sf.ohmyhub[hubId="+hubId+"]"),searchParams=$search.data();if(!$block.length)return!1;$searchBlock.addClass("is-searching"),window.splash.ohmyhub.searchHub($block.attr("id"),term,searchParams,function(){$searchBlock.removeClass("is-searching")})}),1==$searchBarInput.attr("data-autocomplete_cities")&&window.setAddressAutocomplete($searchBarInput,{only_cities:1})},getByHubId:function(hubId,type){return type&&"layoutGrp"!=type?"sf"==type?$("#main-canvas").find('.sf.ohmyhub[hubId="'+hubId+'"]'):"search-bar"==type?$("#main-canvas").find('.layoutGrp.ohmyhub-search[hubId="'+hubId+'"]'):"ohmyhub-nav"==type?$("#main-canvas").find('.layoutGrp.ohmyhub-search[hubId="'+hubId+'"]'):void 0:$("#main-canvas").find('.layoutGrp.ohmyhub[hubId="'+hubId+'"]')},getHubLayoutGrp:function($layoutGrp){var hubId=$layoutGrp.attr("hubId");return $("#splash-container").find(".ohmyhub.layoutGrp[hubId="+hubId+"]")}}}(jQuery),Date.prototype.format=function(e){for(var t="",n=Date.replaceChars,r=0;r<e.length;r++){var i=e.charAt(r);r-1>=0&&"\\"==e.charAt(r-1)?t+=i:n[i]?t+=n[i].call(this):"\\"!=i&&(t+=i)}return t},Date.replaceChars={shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d:function(){return(this.getDate()<10?"0":"")+this.getDate()},D:function(){return Date.replaceChars.shortDays[this.getDay()]},j:function(){return this.getDate()},l:function(){return Date.replaceChars.longDays[this.getDay()]},N:function(){return this.getDay()+1},S:function(){return this.getDate()%10==1&&11!=this.getDate()?"st":this.getDate()%10==2&&12!=this.getDate()?"nd":this.getDate()%10==3&&13!=this.getDate()?"rd":"th"},w:function(){return this.getDay()},z:function(){var e=new Date(this.getFullYear(),0,1);return Math.ceil((this-e)/864e5)},W:function(){var e=new Date(this.getFullYear(),0,1);return Math.ceil(((this-e)/864e5+e.getDay()+1)/7)},F:function(){return Date.replaceChars.longMonths[this.getMonth()]},m:function(){return(this.getMonth()<9?"0":"")+(this.getMonth()+1)},M:function(){return Date.replaceChars.shortMonths[this.getMonth()]},n:function(){return this.getMonth()+1},t:function(){var e=new Date;return new Date(e.getFullYear(),e.getMonth(),0).getDate()},L:function(){var e=this.getFullYear();return e%400==0||e%100!=0&&e%4==0},o:function(){var e=new Date(this.valueOf());return e.setDate(e.getDate()-(this.getDay()+6)%7+3),e.getFullYear()},Y:function(){return this.getFullYear()},y:function(){return(""+this.getFullYear()).substr(2)},a:function(){return this.getHours()<12?"am":"pm"},A:function(){return this.getHours()<12?"AM":"PM"},B:function(){return Math.floor(1e3*((this.getUTCHours()+1)%24+this.getUTCMinutes()/60+this.getUTCSeconds()/3600)/24)},g:function(){return this.getHours()%12||12},G:function(){return this.getHours()},h:function(){return((this.getHours()%12||12)<10?"0":"")+(this.getHours()%12||12)},H:function(){return(this.getHours()<10?"0":"")+this.getHours()},i:function(){return(this.getMinutes()<10?"0":"")+this.getMinutes()},s:function(){return(this.getSeconds()<10?"0":"")+this.getSeconds()},u:function(){var e=this.getMilliseconds();return(e<10?"00":e<100?"0":"")+e},e:function(){return"Not Yet Supported"},I:function(){for(var e=null,t=0;t<12;++t){var r=new Date(this.getFullYear(),t,1).getTimezoneOffset();if(null===e)e=r;else{if(r<e){e=r;break}if(r>e)break}}return this.getTimezoneOffset()==e|0},O:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+Math.abs(this.getTimezoneOffset()/60)+"00"},P:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+Math.abs(this.getTimezoneOffset()/60)+":00"},T:function(){var e=this.getMonth();this.setMonth(0);var t=this.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1");return this.setMonth(e),t},Z:function(){return 60*-this.getTimezoneOffset()},c:function(){return this.format("Y-m-d\\TH:i:sP")},r:function(){return this.toString()},U:function(){return this.getTime()/1e3}},window.splash.dateElement=function($){return{initAll:function(){$("#splash-container").find(".layoutGrp.event-date:not(.card-event-date)").find(".sf:first").each(function(){var $sf=$(this);void 0===$sf.attr("mod")&&void 0!==window.splash.server._event&&window.splash.dateElement.updateDate($sf,window.splash.server._event.date)})},getFormattedDate:function(date,formats){var markup="",date_start=new Date(date.start),date_end=new Date(date.end),current_format=window.splash.dateElement.getCurrentDateType(date);if(void 0===formats[current_format])return"Date Format Error";for(var key in formats[current_format])if({}.hasOwnProperty.call(formats[current_format],key))for(var field_id in formats[current_format][key])if({}.hasOwnProperty.call(formats[current_format][key],field_id)){var classesToAdd=field_id;field_id.match(/-end/g)&&(classesToAdd+=" "+field_id.replace(/-end/g,"")),markup+='<div class="'+classesToAdd+' inline">';var value="";"separator"==field_id?value+=formats[current_format][key][field_id].replace(/ /g,"&nbsp;"):field_id.match(/-end/g)?""!=date.end&&(value+=date_end.format(formats[current_format][key][field_id])):""!=date.start&&(value+=date_start.format(formats[current_format][key][field_id])),markup+=value+"</div>"}return markup},updateDate:function($sf,date){if(null==$sf)$sf=$(".layoutGrp.event-date:not(card-event-date)").find(".sf:first");else{if(0===$sf.length)return;$sf.hasClass("sf")||($sf=$sf.find(".sf:first"))}null==date&&(date=$.extend({},window.splash.server._event.date));var updates=[];return $sf.each(function(){var formats=window.splash.dateElement.loadFormats($(this)),markup=window.splash.dateElement.getFormattedDate(date,formats);$(this).find(".body").html(markup);var sfid=$(this).attr("id");void 0!==sfid&&0===sfid.indexOf("sfid-")&&(updates["data[SplashFeed]["+sfid.replace("sfid-","")+"][body]"]=markup,updates["data[SplashFeed]["+sfid.replace("sfid-","")+"][options][modified]"]=1)}),updates},loadFormats:function($sf){var gidWithFormats=window.splash.cmsComponentManager.getGid($sf,"isSafeToFail");gidWithFormats||(gidWithFormats=$sf.closest(".cardLayoutGrp").attr("data-master-gid"));var options=window.splash.cmsComponentManager.getSplashFeedOptions(gidWithFormats);return void 0!==options&&void 0!==options.formats?options.formats:window.splash.dateElement.getDefaultFormats()},getDefaultFormats:function(){return{"single-day":[{"date-weekday":"l",separator:" "},{"date-month":"F",separator:" "},{"date-day":"d",separator:" at "},{"date-time":"g:ia",separator:" "},{"date-year":"",separator:" "},{"date-time-end":"",separator:" "}],"multi-day":[{"date-weekday":"l",separator:" "},{"date-month":"F",separator:" "},{"date-day":"d",separator:" "},{"date-weekday-end":"l",separator:" "},{"date-month-end":"F",separator:" "},{"date-day-end":"d",separator:" "},{"date-year":"",separator:" "},{"date-year-end":"",separator:" "},{"date-time":"",separator:" - "},{"date-time-end":"",separator:" "}],"multi-month":[{"date-weekday":"l",separator:" "},{"date-month":"F",separator:" "},{"date-day":"d",separator:" "},{"date-weekday-end":"l",separator:" "},{"date-month-end":"F",separator:" "},{"date-day-end":"d",separator:" "},{"date-year":"",separator:" "},{"date-year-end":"",separator:" "},{"date-time":"",separator:" - "},{"date-time-end":"",separator:" "}],tbd:[{separator:"Date TBD"}]}},getCurrentDateType:function(params){if(void 0===params.tbd)return"";if(params.tbd)return"tbd";var start=new Date(params.start),has_end=""!=params.end,end=new Date(params.end);return has_end?start.getMonth()==end.getMonth()?start.getDate()==end.getDate()?"single-day":"multi-day":"multi-month":"single-day"}}}(jQuery),window.splash.venueElement=function($){return{initAll:function(){$("#splash-container").find(".layoutGrp.event-venue:not(.card-event-venue)").each(function(){var $sf=$(this).find(".sf:first");void 0===$sf.attr("mod")&&void 0!==window.splash.server._event&&window.splash.venueElement.updateVenue($sf,window.splash.server._event.venue)})},updateVenue:function($venue_sfs,venue,finetuneUpdates){if(null==$venue_sfs)$venue_sfs=$("#splash-container").find(".layoutGrp.event-venue:not(.card-event-venue)").find(".content.sf");else{if(0===$venue_sfs.length)return;$venue_sfs.hasClass("sf")||($venue_sfs=$venue_sfs.find(".sf:first"))}null==venue&&(venue=$.extend({},window.splash.server._event.venue));var updates={};return $venue_sfs.each(function(){var formats=window.splash.venueElement.loadFormats($(this)),markup=window.splash.venueElement.getFormattedVenue(venue,formats);$(this).find(".body").html(markup);var sfid=$(this).attr("id");return void 0!==sfid&&0===sfid.indexOf("sfid-")&&(updates["data[SplashFeed]["+sfid.replace("sfid-","")+"][body]"]=markup,updates["data[SplashFeed]["+sfid.replace("sfid-","")+"][options][modified]"]=1),!0}),finetuneUpdates&&(window.splash.finetune.addToEditedFields(updates),window.splash.PubSub.publish("page-changes-made")),updates},loadFormats:function($sf){var gidWithFormats=window.splash.cmsComponentManager.getGid($sf,"isSafeToFail");gidWithFormats||(gidWithFormats=$sf.closest(".cardLayoutGrp").attr("data-master-gid"));var options=window.splash.cmsComponentManager.getSplashFeedOptions(gidWithFormats);return void 0!==options&&void 0!==options.formats?options.formats:void 0!==options&&void 0!==options.venues?options.venues:window.splash.venueElement.getDefaultFormats()},getCurrentVenueType:function(venueObject){return"1"==venueObject.tbd?"tbd":""==$.trim(venueObject.name)&&""==$.trim(venueObject.address)?"no-venue-or-address":venueObject.name==venueObject.address?"same-venue-address":"different-venue-address"},getFormattedVenue:function(venueObject,formats){var current_format=window.splash.venueElement.getCurrentVenueType(venueObject),markup='<div class="venue-holder">';for(var key in formats[current_format])if({}.hasOwnProperty.call(formats[current_format],key))for(var field_id in formats[current_format][key])if({}.hasOwnProperty.call(formats[current_format][key],field_id)&&void 0!==formats[current_format][key][field_id]&&"separator"!=field_id){var venue_field=field_id.replace(/venue-/,"");if(""!=venueObject[venue_field]){markup+='<div class="'+venue_field+' inline">';markup+=1==formats[current_format][key][field_id]?""+venueObject[venue_field]:formats[current_format][key][field_id],void 0!==formats[current_format][key].separator&&""!=formats[current_format][key].separator&&(markup+='<div class="separator inline">',markup+=(""+formats[current_format][key].separator).replace(/ /g,"&nbsp;"),markup+="</div>"),markup+="</div>"}}return markup+="</div>"},getDefaultFormats:function(){return JSON.parse('{"different-venue-address":[{"venue-name":"1","separator":" "},{"venue-address":"1","separator":" "},{"venue-city":"1","separator":" "},{"venue-state":"1","separator":" "},{"venue-zip_code":"1","separator":" "},{"venue-country":"1","separator":" "}],"same-venue-address":[{"venue-name":"1","separator":" "},{"venue-address":"1","separator":" "},{"venue-city":"1","separator":" "},{"venue-state":"1","separator":" "},{"venue-zip_code":"1","separator":" "},{"venue-country":"1","separator":" "}],"no-venue-or-address":[{"venue-city":"1","separator":" "},{"venue-state":"1","separator":" "},{"venue-zip_code":"1","separator":" "},{"venue-country":"1","separator":" "}],"tbd":[{"venue-tbd":"Location TBD"}]}')}}}(jQuery),window.splash.navElement=function($){return{initAll:function(){$.each($(".sf.nav"),function(){$(this).find(".nav-dropdown-selected>div").html($(this).find(".nav-item:first a").html()),window.splash.navElement.renderAdaptiveNav($(this)),$(this).removeClass("hide")}),window.splash.navElement.bind()},toggleMobileMenu:function($sf,$selected_link){var $children=$sf.children(".children"),$dropdown=$sf.find(".nav-dropdown-selected");void 0!==$selected_link&&$selected_link.is("a")&&$children.hasClass("open")&&$sf.find(".nav-dropdown-selected .body").html($selected_link.html()),$children.hasClass("open")?($children.removeClass("open"),$dropdown.removeClass("open")):($children.addClass("open"),$dropdown.addClass("open"))},linkableContainerAction:function($container,event){window.jumpToNavBlock($container,event)},renderAdaptiveNav:function($nav){if($nav.hasClass("horizontal-hamburger-left-v2")||$nav.hasClass("horizontal-dropdown-v2")){var isMobile=!1,small_screen=!1,width_exceeded=!1;if((isMobile=$("body").hasClass("isMobile"))||(small_screen=$(window).width()<768),!isMobile&&!small_screen){$nav.removeClass("view-mobile").addClass("view-desktop");var container_width=$nav.closest(".layoutGrp").width(),nav_items_total_width=0;$.each($nav.find(".nav-item:visible"),function(){nav_items_total_width+=$(this).width()}),width_exceeded=nav_items_total_width>container_width}isMobile||width_exceeded||small_screen?$nav.addClass("view-mobile").removeClass("view-desktop"):($nav.addClass("view-desktop").removeClass("view-mobile"),$nav.children(".children").hasClass("open")&&$nav.children(".children").removeClass("open").end().find(".nav-dropdown-selected").removeClass("open"))}},bind:function(){window.splash.navElement.bindNavs(),window.splash.navElement.bindLinkableContainers(),$(window).resize(window.debounce(function(){$.each($(".sf.nav"),function(){window.splash.navElement.renderAdaptiveNav($(this))})},350))},bindLinkableContainers:function(){$("body").hasClass("finetune")||$('.linkable-ele[linked="true"]').off().on("click",window.debounce(function(e){window.splash.navElement.linkableContainerAction($(this),e)},50))},bindNavs:function($nav_elements){void 0===$nav_elements&&($nav_elements=$("#splash-container").find(".sf.nav")),$nav_elements.on("click",".nav-dropdown-selected, .nav-hamburger",window.debounce(function(){window.splash.navElement.toggleMobileMenu($(this).closest(".nav.sf"))},50)),$("body").hasClass("finetune")||$nav_elements.on("click",".open .nav-item a",window.debounce(function(){window.splash.navElement.toggleMobileMenu($(this).closest(".nav.sf"),$(this))},50))}}}(jQuery),window.NavElement={toggleMobileMenu:function($sf,a){window.splash.navElement.toggleMobileMenu($sf,a)}},window.splash.repeatableElement=function($){return{getRepeatableContainerLayoutGrp:function($layoutGrp){var repeatableId=$layoutGrp.attr("data-repeatable-id");return $("#splash-container").find('.dope-repeatable-container[data-repeatable-id="'+repeatableId+'"]')},getRepeatableMasterLayoutGrp:function($layoutGrp){var repeatableId=$layoutGrp.attr("data-repeatable-id");return $("#splash-container").find('.dope-repeatable-master[data-repeatable-id="'+repeatableId+'"]')},isInsideLockedRepeatableContainer:function($layoutGrp){return!(!$layoutGrp.hasClass("dope-repeatable-child")&&!$layoutGrp.closest(".dope-repeatable-child").length||!$layoutGrp.closest(".dope-repeatable-locked").length)},isInsideRepeatableItem:function($layoutGrp){return $layoutGrp.closest(".dope-repeatable-child")&&!$layoutGrp.hasClass("dope-repeatable-child")}}}(jQuery),window.splash.socialLinksElement=function($){return{initAll:function(){window.splash.socialLinksElement.bind()},bind:function(){$("#splash-container, #rsvp-modal").on("click",".sf.social-links-v2 .social-btn",function(){var splashFeedOptions=$(this).closest(".sf.social-links-item").data("splashFeedOptions");splashFeedOptions&&splashFeedOptions.action||(splashFeedOptions={action:""}),"twitter-tweet"==splashFeedOptions.action?window.splash.socialActions.fireTweet(splashFeedOptions.body):"facebook-share"==splashFeedOptions.action?window.splash.socialActions.fireFacebookShare(splashFeedOptions.name,splashFeedOptions.description,splashFeedOptions.picture):"linkedin-share"==splashFeedOptions.action?window.splash.socialActions.fireLinkedInShare(splashFeedOptions.title,splashFeedOptions.description):"email-send"==splashFeedOptions.action?window.splash.socialActions.fireEmailSend(splashFeedOptions.subject,splashFeedOptions.body):"mms-send"==splashFeedOptions.action&&window.splash.socialActions.fireMmsSend(splashFeedOptions.caption)})}}}(jQuery),window.splash.attendeesElement=function($){var attendees={},opts={};return{getOptions:function(sfid){return void 0!==sfid?opts[sfid]:opts},initAll:function(){$.each($("#splash-container .sf.attendees"),function(){window.splash.attendeesElement.init($(this))}),$(window).resize(function(){window.debounce(function(){$.each($("#splash-container .sf.attendees"),function(){window.splash.attendeesElement.responsive($(this))})},250)})},init:function($sf){if(void 0===window.splash.server._event.id)return!1;var sfid=$sf.attr("id").replace("sfid-","");opts[sfid]={},opts[sfid].attendee_fields={},window.splash.attendeesElement.load($sf)},load:function($sf){var sfid=$sf.attr("id").replace("sfid-",""),parameters={};parameters.action="attendees",parameters.method="getAttendees",parameters.splash_feed_id=sfid,$sf.hasClass("modal")&&!window.splash.server.constants.finetune&&(parameters.count=!0),$.ajax({type:"POST",url:window.location.pathname,data:parameters}).done(function(response,status){try{response=JSON.parse(response.replace(/&amp;/g,"&"))}catch(e){return void console.log(e)}void 0!==response.errors?"unauthorized"==response.errors?(window.splash.attendeesElement.render($sf,{attendees:{},count:0}),$sf.find(".attendee-count-value").text("Save required for loading ")):(console.log("Get Attendees Response: errors"),console.log(response.errors)):void 0!==response.attendees?(void 0!==response.attendee_fields&&(opts[sfid].attendee_fields=response.attendee_fields),$sf.find(".attendee-list .attendee-item").remove(),attendees=response.attendees,window.splash.attendeesElement.render($sf,response)):void 0!==response.count?($sf.find(".attendee-count-value").text(0==response.count?"No":response.count),$sf.find(".attendee-title").removeClass("hide").addClass("title")):console.log("Get Attendees Response: no results"),"function"==typeof window.customAfterRenderAttendees&&window.customAfterRenderAttendees(response,sfid)}).fail(function(xhr,options,error){console.log("Get Attendees Response: "+xhr.status+" - "+error)})},render:function($sf,response){var sfid=$sf.attr("id").replace("sfid-",""),attendees=response.attendees,count=response.count;0==count&&window.splash.server.constants.finetune&&$sf.find(".attendee-wrapper").removeClass("hide");var $template=$sf.find(".attendee-template").clone(),$field_template=$sf.find(".attendee-field-template"),fields_to_render=opts[sfid].attendee_fields,$new_fields=$();for(var num in fields_to_render)if("first-name"!=num&&"last-name"!=num&&"1"==fields_to_render[num]){var $new_field=$field_template.clone().removeClass("attendee-field-template hide").addClass("attendee-"+num);$new_fields=$new_fields.add($new_field)}$template.find(".attendee-info").append($new_fields);var $attendee_items=$(),attendee_ids=Object.keys(attendees);attendee_ids.reverse();for(var i in attendee_ids)if({}.hasOwnProperty().call(attendee_ids,i)){var attendee_id=attendee_ids[i],attendee=attendees[attendee_id];$attendee_items=$attendee_items.add(window.splash.attendeesElement.populateTemplate($template,attendee,attendee_id))}$sf.find(".attendee-list").append($attendee_items),window.splash.attendeesElement.responsive($sf),$sf.find(".attendee-count-value").text(0==count?"No":count),$sf.find(".attendee-count-text").text(window.splash.attendeesElement.singularOrPlural(count,$sf.find(".attendee-count-text").text())),$sf.find(".attendee-wrapper").removeClass("hide"),$sf.find(".attendee-title").removeClass("hide").addClass("title")},populateTemplate:function($markup,attendee_data,attendee_id){var $attendee=$markup.clone().removeClass("attendee-template").addClass("attendee-item");return null!=attendee_id&&$attendee.attr("id","attendee-"+attendee_id),$.each(attendee_data,function(key,value){if("avatar"==key)return!0;"user-id"==key?$attendee.attr("data-user-id",value):$attendee.find(".attendee-"+key).text(value).removeClass("hide")}),void 0!==attendee_data.avatar&&null!=attendee_data.avatar&&$attendee.find(".attendee-avatar img").attr("src",attendee_data.avatar).parent().removeClass("hide"),$attendee},responsive:function($sf){var sf_width=$sf.width();$sf[0].className=$sf[0].className.replace(/cols[0-9]/g,""),sf_width>=320&&sf_width<480?$sf.addClass("cols2").removeClass:sf_width>=480&&sf_width<760?$sf.addClass("cols3"):sf_width>=768&&sf_width<1e3?$sf.addClass("cols4"):sf_width>=1e3&&$sf.addClass("cols5")},singularOrPlural:function(count,text){return 1==count?text.replace("ttendees","ttendee").replace("embers","ember").replace("people","person").replace("are ","is ").replace("were","was "):text.replace("ttendee ","ttendees ").replace("ember ","embers ").replace("person","people").replace("is ","are ").replace("was","were ")},sortAttendees:function($sf,$attendees,sortField){$attendees.detach().sort(function(a,b){var a_id=$(a).attr("id").replace("attendee-",""),b_id=$(b).attr("id").replace("attendee-",""),v1=attendees[a_id][sortField].trim(),v2=attendees[b_id][sortField].trim();return v2>v1?-1:v1>v2?1:0}),$sf.append($attendees)}}}(jQuery),window.AttendeesElement={initAll:function(){window.splash.attendeesElement.initAll()},init:function($sf){window.splash.attendeesElement.init($sf)},load:function($sf){window.splash.attendeesElement.load($sf)},render:function($sf,response){window.splash.attendeesElement.render($sf,response)},populateTemplate:function($markup,attendee_data,attendee_id){window.splash.attendeesElement.populateTemplate($markup,attendee_data,attendee_id)},responsive:function($sf){window.splash.attendeesElement.responsive($sf)},singularOrPlural:function(count,text){window.splash.attendeesElement.singularOrPlural(count,text)},sortAttendees:function($sf,$attendees,sortField){window.splash.attendeesElement.sortAttendees($sf,$attendees,sortField)}},window.splash.calendarListElement=function($){return{initAll:function(){},init:function(){}}}(jQuery),window.splash.countdownElement=function(splash,$){return{initAll:function(){$("#splash-container .sf.countdown").each(function(){splash.countdownElement.init($(this))})},init:function($sf){if(splash.server._event.date.tbd)$sf.find(".countdown-date-tbd").show().end().find(".countdown-body").hide();else if(splash.Countdown){var countdown=new splash.Countdown({date:splash.server._event.date.start_timestamp,onUpdate:function(data){splash.countdownElement.render(data,$sf)}});$sf.data("countdown",countdown)}else setTimeout(function(){throw new Error("Countdown element error, no countdown module.")},0)},render:function(data,$sf){$sf.find(".countdown-plain .days").text(data.days+365*data.years),$sf.find(".countdown-plain .hours").text(data.hours),$sf.find(".countdown-plain .minutes").text(data.min);var sec=data.sec>=10?data.sec:"0"+data.sec;$sf.find(".countdown-plain .seconds").text(sec)},updateAll:function(){if(splash.server._event.date.tbd)$("#splash-container .sf.countdown .countdown-date-tbd").show(),$("#splash-container .sf.countdown .countdown-body").hide(),$("#splash-container .sf.countdown").each(function(){var countdown=$(this).data("countdown");countdown&&countdown.stop()});else{var newTime=new Date(splash.server._event.date.start);$("#splash-container .sf.countdown").each(function(){if(void 0===$(this).data("countdown"))splash.countdownElement.init($(this));else{var countdown=$(this).data("countdown");countdown&&countdown.update(newTime).start()}}),$("#splash-container .sf.countdown .countdown-date-tbd").hide(),$("#splash-container .sf.countdown .countdown-body").show()}}}}(window.splash,window.jQuery),window.splash.commentsElement=function($){var comments={},counts={},deletePermission=!1,_hasActiveChildren=function(comment_data){if(!(void 0!==comment_data.children&&!jQuery.isEmptyObject(comment_data.children)))return!1;for(var i in comment_data.children)if({}.hasOwnProperty.call(comment_data.children,i)&&0==comment_data.children[i].deleted)return!0;for(var j in comment_data.children)if({}.hasOwnProperty.call(comment_data.children,j)&&_hasActiveChildren(comment_data.children[j].deleted))return!0;return!1},_getSorting=function($sf){return $sf.hasClass("oldestToNewest")?"oldestToNewest":"newestToOldest"},_getCommentTemplate=function(){return $("#splash-container .sf.comments:first").find(".template-blank-comment").clone().removeClass("template-blank-comment")},_publishAnimation=function($comment_item){window.scrollToBlock($comment_item),$comment_item.addClass("pulse"),setTimeout(function(){$comment_item.removeClass("pulse")},1500)};return{initAll:function(){$.each($("#splash-container .sf.comments"),function(){window.splash.commentsElement.loadCommentsElement($(this))}),window.splash.commentsElement.bind()},getComments:function(){return comments},commentFormValidation:function($form,name,email,body){var validates=!0;return void 0===name||""===name?($form.find(".new-comment-name").addClass("error"),validates=!1):$form.find(".new-comment-name").removeClass("error"),void 0!==email&&window.isValidEmail(email)?$form.find(".new-comment-email").removeClass("error"):($form.find(".new-comment-email").addClass("error"),validates=!1),void 0===body||""===body?($form.find(".new-comment-body").addClass("error"),validates=!1):$form.find(".new-comment-body").removeClass("error"),validates},populateCommentTemplate:function(comment_data,sfid){var $new_comment;if(void 0!==comment_data.deleted&&1==comment_data.deleted&&_hasActiveChildren(comment_data))($new_comment=$("#splash-container .sf.comments:first").find(".template-deleted-comment").clone()).removeClass("template-deleted-comment");else{if(0!=comment_data.deleted)return"";($new_comment=_getCommentTemplate()).find(".comment-author").text(comment_data.name),$new_comment.find(".comment-user-id").text(void 0!==comment_data.user_id?comment_data.user_id:""),$new_comment.find(".comment-body").text(comment_data.body);var created=comment_data.created.replace(/ {2}/," ").split(" ");$new_comment.find(".comment-action-date .comment-date-month").text(created[1]),$new_comment.find(".comment-action-date .comment-date-day").text(created[2]),$new_comment.find(".comment-action-date .comment-date-time").text(created[3]),$new_comment.find(".comment-form").attr("data-id",comment_data.id),$new_comment.find(".new-comment-name label").attr("for","new-comment-name-"+comment_data.id),$new_comment.find(".new-comment-name input").attr("id","new-comment-name-"+comment_data.id),$new_comment.find(".new-comment-email label").attr("for","new-comment-email-"+comment_data.id),$new_comment.find(".new-comment-email input").attr("id","new-comment-email-"+comment_data.id),$new_comment.find(".new-comment-body label").attr("for","new-comment-body-"+comment_data.id),$new_comment.find(".new-comment-body textarea").attr("id","new-comment-body-"+comment_data.id),void 0!==comment_data.avatar&&null!=comment_data.avatar?$new_comment.find(".comment-avatar").find("img").attr("src",comment_data.avatar).show().end().find(".letter-icon").hide():$new_comment.find(".comment-avatar").find("img").hide().end().find(".letter-icon").text(comment_data.name.charAt(0)),deletePermission&&$new_comment.find(".comment-action-reply").after('<span class="divider"> · </span> <a class="comment-action-delete">Delete</a>')}return void 0!==comment_data.children&&$.each(comment_data.children,function(index,child){$new_comment.children(".comment-responses").append(window.splash.commentsElement.populateCommentTemplate(child,sfid))}),$new_comment},renderComments:function($sf,deletePermission,limit){var sfid=$sf.attr("id").replace("sfid-",""),new_top_comments_loaded=0;if(void 0!==comments[sfid]){var $comments_to_append=$(),comment_ids=Object.keys(comments[sfid]);"newestToOldest"==_getSorting($sf)&&comment_ids.reverse();for(var i in comment_ids)if({}.hasOwnProperty.call(comment_ids,i)){var index=comment_ids[i],comment_data=comments[sfid][index];if(null!=limit&&new_top_comments_loaded>=limit)break;void 0!==comments[sfid][index].rendered&&1==comments[sfid][index].rendered||(1!=comment_data.deleted||_hasActiveChildren(comment_data)?($comments_to_append=$comments_to_append.add(window.splash.commentsElement.populateCommentTemplate(comment_data,$sf.attr("id"))),comments[sfid][index].rendered=!0,new_top_comments_loaded++):comments[sfid][index].rendered=!0)}$sf.find(".comment-wrapper").append($comments_to_append),$sf.find(".comments-element-header span").text(counts[sfid].total)}counts[sfid].top_level_rendered+=new_top_comments_loaded,$sf.hasClass("newestToOldest")?$sf.find(".comment-response-top-level.top-placed").show().end().find(".comment-response-top-level.bottom-placed").hide():$sf.hasClass("oldestToNewest")&&$sf.find(".comment-response-top-level.bottom-placed").show().end().find(".comment-response-top-level.top-placed").hide(),$sf.find(".loader").hide()},loadCommentsElement:function($sf,reset){if(void 0!==$sf&&null!=$sf){var sfid=$sf.attr("id").replace("sfid-","");counts[sfid]={total:0,top_level_rendered:0},reset=void 0===reset||reset;var parameters={};parameters.action="comments",parameters.method="get",parameters.splash_feed_id=sfid,$.ajax({type:"POST",url:window.location.pathname,data:parameters}).done(function(response,status){void 0!==(response=JSON.parse(response.replace(/&amp;/g,"&"))).errors?(console.log("Get Comments Response: errors"),console.log(response.errors)):(reset&&($sf.css("height",$sf.height()+"px"),$sf.find(".comment-wrapper").html(""),counts[sfid].total=response.count),comments[sfid]=response.result,deletePermission=response.deletePermission,window.splash.commentsElement.renderComments($sf,deletePermission,10),reset&&$sf.css("height","auto"),window.splash.commentsElement.showMore($sf,0)),"function"==typeof window.customAfterCommentsLoad&&window.customAfterCommentsLoad(response),$sf.find(".refresh-loader").hide()}).fail(function(xhr,options,error){console.log("Get Comments Response: "+xhr.status+" - "+error)})}},postButtonAction:function($post_button_element){var $form=$post_button_element.closest(".comment-form"),name=$form.find(".new-comment-name input").val(),email=$form.find(".new-comment-email input").val(),body=$form.find(".new-comment-body textarea").val();if(!window.splash.commentsElement.commentFormValidation($form,name,email,body))return!1;var $sf=$form.closest("#splash-container .sf.comments"),sfid=$sf.attr("id").replace("sfid-",""),parameters={};parameters.action="comments",parameters.method="new",parameters.comment={},parameters.comment.name=name,parameters.comment.email=email,parameters.comment.body=body,parameters.comment.parent_id=$form.attr("data-id"),parameters.comment.splash_feed_id=sfid,$.ajax({type:"POST",url:window.location.pathname,data:parameters}).done(function(response,status){if(void 0!==(response=JSON.parse(response)).errors){var $error_div=$form.find(".new-comment-server-error");$.each(response.errors,function(i,val){"event-id-doesnt-match"==val?$error_div.append($("<div>").text("Can't post a comment here")).show():"empty-parameter"==val?$error_div.append($("<div>").text("Please fill out all fields")).show():"email-wrong-format"==val?$error_div.append($("<div>").text("Please write a valid email address")).show():console.log("New Comment Response: error "+val)})}else if(void 0!==response.success){$form.find(".new-comment-name:not(.hide) input").val(""),$form.find(".new-comment-email:not(.hide) input").val(""),$form.find(".new-comment-body textarea").val("");var comment_data=response.success,$new_comment=_getCommentTemplate();$new_comment.find(".comment-author").text(comment_data.name),$new_comment.find(".comment-body").text(comment_data.body),$new_comment.find(".comment-action-date").text(comment_data.created),$new_comment.find(".comment-form").attr("data-id",comment_data.id),$new_comment.find(".new-comment-name label").attr("for","new-comment-name-"+comment_data.id),$new_comment.find(".new-comment-name input").attr("id","new-comment-name-"+comment_data.id),$new_comment.find(".new-comment-email label").attr("for","new-comment-email-"+comment_data.id),$new_comment.find(".new-comment-email input").attr("id","new-comment-email-"+comment_data.id),$new_comment.find(".new-comment-body label").attr("for","new-comment-body-"+comment_data.id),$new_comment.find(".new-comment-body textarea").attr("id","new-comment-body-"+comment_data.id),void 0!==comment_data.avatar&&null!=comment_data.avatar?$new_comment.find(".comment-avatar").find("img").attr("src",comment_data.avatar).show().end().find(".letter-icon").hide():$new_comment.find(".comment-avatar").find("img").hide().end().find(".letter-icon").text(comment_data.name.charAt(0)),deletePermission&&$new_comment.find(".comment-action-reply").after('<span class="divider"> · </span> <a class="comment-action-delete">Delete</a>'),$form.hide(),void 0===comment_data.parent_id||0==comment_data.parent_id?($sf.hasClass("newestToOldest")?$sf.find(".comment-wrapper").prepend($new_comment):$sf.find(".comment-wrapper").append($new_comment),$sf.find(".comment-response-top-level .comment-form").hide().end().find(".dummy").show(),counts[sfid].top_level_rendered++):($sf.hasClass("newestToOldest")?$form.closest(".comment-item").children(".comment-responses").prepend($new_comment):$form.closest(".comment-item").children(".comment-responses").append($new_comment),$form.closest(".comment-item").find(".comment-action-reply").text("Reply")),counts[sfid].total++,$sf.find(".comments-element-header span").text(counts[sfid].total),_publishAnimation($new_comment)}else console.log("New Comment Response: response not recognized")}).fail(function(xhr,options,error){console.log("New Comment Response: "+xhr.status+" - "+error),$form.find(".new-comment-server-error").append($("<div>").text("Sorry, couldn't post a new comment")).show()})},deleteCommentAction:function($commentActionDelete){var $this=$commentActionDelete,$sf=$this.closest(".sf.comments"),sfid=$sf.attr("id").replace("sfid-",""),parameters={};parameters.action="comments",parameters.method="delete",parameters.comment={},parameters.comment.id=$this.closest(".comment-actions").find(".comment-form").attr("data-id"),parameters.comment.splash_feed_id=sfid,$.ajax({type:"POST",url:window.location.pathname,data:parameters}).done(function(response,status){if(void 0!==(response=JSON.parse(response)).errors)console.log("Delete Comment Response: errors"),console.log(response.errors),$this.closest(".comment-actions").find(".comment-action-date").after("<span class=\"divider\"> · </span><a class='comment-server-error'>Couldn't delete</a>");else if(void 0!==response.success){var $deleted_comment=$sf.find(".template-deleted-comment").clone();$deleted_comment.removeClass("template-deleted-comment"),$deleted_comment.find(".comment-responses").html($this.closest(".comment-item").children(".comment-responses")),$this.closest(".comment-item").html($deleted_comment),counts[sfid].total--,counts[sfid].top_level_rendered--,$sf.find(".comments-element-header span").text(counts[sfid].total)}else console.log("Delete Comment Response: response not recognized")}).fail(function(xhr,options,error){console.log("Delete Comment Response: "+xhr.status+" - "+error),$this.closest(".comment-actions").find(".comment-action-date").after("<span class=\"divider\"> · </span><a class='comment-server-error'>Couldn't delete</a>")})},replyCommentFormShow:function($comment_action_reply){var $this=$comment_action_reply,$form=$this.closest(".comment-actions").find(".comment-form"),top_level_response=!1;0==$form.length&&($form=$this.closest(".comment-form"),top_level_response=!0),$form.is(":visible")?top_level_response?($form.hide(),$this.closest(".comment-response-top-level").find(".dummy").show()):($this.text("Reply"),$form.slideUp(400)):($form.slideDown(400),$this.text("Close").closest(".comment-actions").find(".new-comment-body textarea").focus())},postCommentFormShow:function($response_textarea){var $this=$response_textarea;$this.closest(".dummy").hide(),$this.closest(".comment-response-top-level").find(".comment-form").slideDown().find(".new-comment-body textarea").focus()},refreshComments:function($sf){$sf.find(".refresh-loader").show(),window.splash.commentsElement.loadCommentsElement($sf,!0),setTimeout(function(){$sf.find(".refresh-loader").hide()},100)},showMore:function($sf,increment){"number"!=typeof increment&&(increment=10);var sfid=$sf.attr("id").replace("sfid-","");increment>0&&window.splash.commentsElement.renderComments($sf,deletePermission,increment),counts[sfid].top_level_rendered<Object.keys(comments[sfid]).length?$(".comment-show-more").show():$(".comment-show-more").hide()},firstTimeLoad:function($sf){$sf.find(".loader").hide(),$sf.find(".first-time-msg").show()},bind:function(){$(".refresh-comments").on("click",function(){window.splash.commentsElement.refreshComments($(this).closest(".sf.comments"))}),$(document.body).on("click",".comment-response-top-level .dummy textarea",function(e){window.splash.commentsElement.postCommentFormShow($(e.target))}),$(document.body).on("click",".comment-action-reply",function(e){window.splash.commentsElement.replyCommentFormShow($(e.target))}),$(document.body).on("click",".comment-action-delete",function(e){window.splash.commentsElement.deleteCommentAction($(e.target))}),$(document.body).on("click",".comment-form .post-button",function(e){window.splash.commentsElement.postButtonAction($(e.target))}),$(".comment-show-more").on("click",function(){window.splash.commentsElement.showMore($(this).closest(".sf.comments"))})}}}(jQuery),window.splash.galleryExistsOnPage=galleryExistsOnPage,window.splash.galleryElement={galleryMasonryVars:{itemSelector:".sort"}};var ticket_id={};$(window).load(function(){autoFontResize()}),window.twitterAuthed=function(data){var twitter_data={};if(void 0!==data){if(void 0!==data.name){var name_array=data.name.split(" ");twitter_data.first_name=name_array[0],twitter_data.last_name=name_array[name_array.length-1]}void 0!==data.screen_name&&(twitter_data.twitter=data.screen_name),fillRsvpForm(twitter_data,"twitter")}removeHighlightColor(),$('.social-auth-container[network="twitter"]').addClass("selected-color");var encoded_response=JSON.stringify(data),$social_input=$("#rsvp-form-inner").find('input[social-attr="splash_twitter_rsvp"]');$social_input.length>0&&$social_input.val(encoded_response)},window.addEventListener("message",function(event){var response=event.data||{},splash=window.splash||{},type=response.type,callback=response.callback,data=response.data,origin=event.origin,allowOrigin="https://splashthat.com";splash.server&&splash.server.constants&&splash.server.constants.ocbDomain&&(allowOrigin="https://"+splash.server.constants.ocbDomain),"X-SPLASH-REMOTE-AUTH"!==type||allowOrigin&&origin!==allowOrigin||"function"!=typeof window[callback]||window[callback](data)}),window.linkedinAuthed=function(data){if("error"==data)SplashUI.notify("There was an error with LinkedIn Integration.");else{var linkedinData={};void 0!==data&&(void 0!==data.firstName&&(linkedinData.first_name=data.firstName),void 0!==data.lastName&&(linkedinData.last_name=data.lastName),void 0!==data.emailAddress&&(linkedinData.email=data.emailAddress),void 0!==data.positions&&void 0!==data.positions.values&&void 0!==data.positions.values[0]&&void 0!==data.positions.values[0].company&&void 0!==data.positions.values[0].company.name&&(linkedinData.company=data.positions.values[0].company.name),fillRsvpForm(linkedinData,"linkedin")),removeHighlightColor(),$('.social-auth-container[network="linkedin"]').addClass("selected-color");var encoded_response=JSON.stringify(data),$social_input=$("#rsvp-form-inner").find('input[social-attr="splash_linkedin_rsvp"]');$social_input.length>0&&$social_input.val(encoded_response)}},window.googlePlusAuthed=function(data){if("error"===data)SplashUI.notify("There was an error with Google+ Integration.");else{var googlePlusData={};void 0!==data&&(void 0!==data.name&&(void 0!==data.name.givenName&&(googlePlusData.first_name=data.name.givenName),void 0!==data.name.familyName&&(googlePlusData.last_name=data.name.familyName)),void 0!==data.emails&&void 0!==data.emails[0]&&void 0!==data.emails[0].value&&(googlePlusData.email=data.emails[0].value),void 0!==data.organizations&&data.organizations.forEach(function(org){void 0!==org.type&&void 0!==org.primary&&"work"==org.type&&1==org.primary&&(googlePlusData.company=org.name)}),void 0!==data.gender&&(googlePlusData.gender=data.gender),fillRsvpForm(googlePlusData,"google_plus")),removeHighlightColor(),$('.social-auth-container[network="google_plus"]').addClass("selected-color");var encoded_response=JSON.stringify(data),$social_input=$("#rsvp-form-inner").find('input[social-attr="splash_google_plus_rsvp"]');$social_input.length>0&&$social_input.val(encoded_response)}},splash.matchHeight=matchHeight,splash.unmatchHeight=unmatchHeight,splash.checkForNoHeaderStuff=checkForNoHeaderStuff,RegExp.escape=function(text){return text.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};var videoPlayer={pause:function(){}},galleryOpen=!1,currentPhotoId=0,gBlankHtml,galleryIframeUtils={top:0,switchOrigin:"",isActive:function(){return window.location!=window.parent.location&&$(window).height()>2*$(window).width()}},stickyOn=!1;window.onbeforeunload=function(evt){if(stickyOn){var message="Looks like you might be listening to some tunes here.";return void 0==typeof evt&&(evt=window.event),evt&&(evt.returnValue=message),message}};var gallerySliding=!1,galleryI={},$gallery;galleryNP={n:0,np1:0,nm1:0,np2:0,nm2:0};var photoLoadDelay=0,loadedPhotos=[],cleared=!1;splash.galleryThumbFlow=galleryThumbFlow;var scrollTop,windowHeight,winBottom,doneLoadingThumbs=!1,$gallery=$("#gallery-container"),sectionAdder=!1,loggedOutScrollChecks=debounce(function(){scrollTop=$(document).scrollTop(),winBottom=Math.ceil(scrollTop+windowHeight),checkViewportForThumbsToLoad();var $ll=$("#live-link");!sectionAdder&&$ll.length>0&&splash.server.constants.finetune&&($ll.addClass("active"),sectionAdder=!0),"undefined"!=typeof mustClickToLoadMore&&mustClickToLoadMore||checkViewportForThumbsToLoad(),$gallery.length&&(windowHeight+scrollTop>$gallery.offset().top?$("#live-link").addClass("active"):$("#live-link").removeClass("active"))},500);$(document).scroll(loggedOutScrollChecks),$(window).resize(debounce(function(){windowHeight=$(window).height(),scrollTop=$(document).scrollTop(),setImageOrientation($("#gallery-container").find("div.photo.active")),splash.galleryExistsOnPage()&&galleryOuterWidthReflow(),resizeSplashContainer(),splash.cmsUtils.applyAutoWindowSizesToComponents(),resizeGalleryCarousel(),matchHeight(),autoFontResize(),fixFooter(),splash.PubSub.publish("page-resized")},250)),splash.positionThumbnail=positionThumbnail;var thumbsToLoad=30,partyDelays={check:3e3,scrollJump:900},newPhotosSince,partyMode=!1,keepScrolling=!1,keepScrollingRepeat=!1,nwineiunvriwunewervwe,$get_params=getQueryParams(window.location.search);void 0!==$get_params.fb?setTimeout(function(){$("#fb-link").click()},2e3):void 0!==$get_params.tw&&setTimeout(function(){$("#twitter-link").click()},2e3),void 0!==$get_params.closefb&&window.close();var galleryOuterWidthReflowTimer,lzD=0,lazyLoader=function(){this.q=[],this.r=!1};lazyLoader.prototype={load:function(image,_c){image&&""!=image&&(this.q.push(image),0==this.r&&this.go(_c))},go:function(_c){if(this.q.length>0){this.r=!0;var image=this.q.shift(),me=this,went=!1;this.loadImage(image,function(){went||(me.go(),went=!0),void 0!==_c&&_c()}),setTimeout(function(){went||(me.go(),went=!0)},200)}else this.r=!1},loadImage:function(i,_c){var iL=new ImageLoader(i.getAttribute("lazy-src"));iL.loadEvent=function(u){i.setAttribute("src",u),i.removeAttribute("lazy-src"),$(i).parents(".inner:first").addClass("loaded").find(".lazy.message").hide(),void 0!==_c&&setTimeout(_c,lzD),splash.positionThumbnail($(i))},iL.load()}};var myLazyLoader=new lazyLoader;splash.lazyLoad=lazyLoad,splash.resizeSplashContainer=resizeSplashContainer,$.fn.slideToCurrent=function(){var $carousel=$(this),$parent=$carousel.parents(".layoutGrp:first"),$slides=$carousel.find(".slides"),$left=$parent.find(".scrollLeftContain"),$right=$parent.find(".scrollRightContain"),$current=$carousel.find(".list-item.current:first");if($current.length<1)return!1;var left=$current.position().left;$slides.css("left","-"+left+"px");var current_index=$current.index();$parent.find(".progress .current").html(current_index+1);var $currentImg=$current.find("img:first");$currentImg.hasClass("unloaded")&&splash.lazyLoad($currentImg[0],function(){$currentImg.removeClass("unloaded")}),$current.prev().length>0?$left.show():$left.hide(),$current.next().length>0?$right.show():$right.hide()},$.fn.activateCarousel=function(params){function loadNext(){var $next=$carousel.find("img.unloaded:first");1==$next.length&&splash.lazyLoad($next[0],function(){$next.removeClass("unloaded")})}var $carousel=$(this),$parent=$carousel.parents(".layoutGrp:first"),$left=$parent.find(".scrollLeftContain"),$right=$parent.find(".scrollRightContain"),$slides=$carousel.find(".slides"),imgCount=$carousel.find(".list-item").length;"1"==imgCount&&($left.hide(),$right.hide()),$parent.find(".progress").find(".total").text(imgCount),$carousel.find(".carousel-lazy-load-image").each(function(){splash.lazyLoad(this)}),setTimeout(function(){var width=$slides.parent().width(),$imgs=$slides.find(".list-item");$imgs.css("width",width+"px"),$imgs.length>0&&$slides.css("width",width*($imgs.length+1)+"px")},0),$left.unbind("click").click(function(){var $currentImg=$carousel.find(".list-item.current:first"),$prev=$currentImg.prev();$currentImg.removeClass("current"),$prev.addClass("current"),$carousel.slideToCurrent()}),$right.unbind("click").click(function(){var $currentImg=$carousel.find(".list-item.current:first");$currentImg.next().addClass("current"),$currentImg.removeClass("current"),$carousel.slideToCurrent(),loadNext()})},splash.autoFontResize=autoFontResize,splash.clearFontResizeClasses=clearFontResizeClasses;var ticketForm=function(ticket_hierarchy){var $form=null,getChildIds=function(parent_ttid){var childIds=[],objectKey="parent_id_"+parent_ttid;return ticket_hierarchy.parent2children[objectKey]&&ticket_hierarchy.parent2children[objectKey]instanceof Array&&(childIds=ticket_hierarchy.parent2children[objectKey]),childIds},getParentIds=function(child_ttid){var parentIds=[],objectKey="child_id_"+child_ttid;return ticket_hierarchy.children2parents[objectKey]&&ticket_hierarchy.children2parents[objectKey]instanceof Array&&(parentIds=ticket_hierarchy.children2parents[objectKey]),parentIds},showChildren=function(ticketTypeId){for(var childIds=getChildIds(ticketTypeId),t=childIds.length;t>=0;t--){var $child=$("#ticket-type-"+childIds[t],$form),parentId=$child.data("parent-ticket-type-ids"),$parent=$("#ticket-type-"+parentId).closest(".ticket-container");$child.hasClass("nested")&&!$child.hasClass("relocated")&&$parent.length>0&&$child.closest(".ticket-container").detach().insertAfter($parent).end().show().addClass("relocated"),$child.show().find("input, select, textarea").prop("disabled",!1)}},hideChildrenIfNotNeeded=function(ticketTypeId){for(var childIds=getChildIds(ticketTypeId),t=0;t<childIds.length;t++){for(var parentIds=getParentIds(childIds[t]),neededByOtherParent=!1,p=0;p<parentIds.length;p++){var otherParentQty=$('select.quantity-select[data-ttid="'+parentIds[p]+'"]').val();if(otherParentQty&&parseInt(otherParentQty)>0){neededByOtherParent=!0;break}}if(neededByOtherParent)return null;var $child=$("#ticket-type-"+childIds[t],$form);$child.hide(),$child.find("input, select, textarea").val(0).prop("disabled",!0);for(var c=0;c<childIds.length;c++)hideChildrenIfNotNeeded(childIds[c])}},selectQuantity=function(){var $dropdown=$(this),ticketTypeId=$dropdown.data("ttid"),quantity=$dropdown.val();quantity&&parseInt(quantity)>0?(showChildren(ticketTypeId),ticket_id[ticketTypeId]=parseInt(quantity)):(delete ticket_id[ticketTypeId],hideChildrenIfNotNeeded(ticketTypeId)),splash.server.constants.ltt&&(parseInt(quantity)>0?$("#ticketForm .quantity-select").not($dropdown).not($("#ticket-type-"+$dropdown.closest(".secondary-ticket").data("parent-ticket-type-ids")).find("input, select, textarea")).not(".secondary-ticket select, .secondary-ticket input, .secondary-ticket textarea").attr("disabled","disabled").attr("title","Only one ticket type per attendee permitted for this event"):$("#ticketForm .quantity-select").removeAttr("disabled").removeAttr("title")),$(".secondary-ticket:visible").not(".nested").length?$(".addon-tickets",$form).addClass("applicable"):$(".addon-tickets",$form).removeClass("applicable")};$(function(){($form=$("#ticketForm")).find("select.quantity-select").on("change",selectQuantity)})};splash.socialActions=function($){return{initTwitterShare:function(){"undefined"!=typeof twttr&&twttr.ready(function(twttr){twttr.events.bind("tweet",function(ev){"function"==typeof customAfterTwitterShare&&customAfterTwitterShare(ev)})})},fireTweet:function(body){null!=body&&""!=body.trim()||(body=splash.server._event.social.twitter.body),""==(body=body.trim().replace("&amp;","&"))&&void 0!==splash.server._event.finetune&&(body=splash.server._event.finetune.social_defaults.twitter.body);var href="https://twitter.com/intent/tweet?source=tweetbutton&text="+encodeURIComponent(body);window.open(href,"Twitter","width=400,height=350"),ga("splash.send","event","Splash","SocialTrayTW","tw id:"+splash.server._event.id)},fireFacebookShare:function(name,description,picture){var params=splash.socialActions.getFaceBookParams(name,description,picture);if(splash.server.constants.facebook_share_widget)FB.ui({method:"feed",name:params.name,link:params.domain,picture:params.picture,caption:"",description:params.description},function(response){response&&response.post_id&&"function"==typeof customAfterFaceBookShare&&customAfterFaceBookShare(response)});else{var href="https://www.facebook.com/dialog/feed?display=popup&app_id="+splash.server.constants.facebook_client_id+"&description="+encodeURIComponent(params.description)+"&name="+encodeURIComponent(params.name)+"&picture="+encodeURIComponent(params.picture)+"&link="+encodeURIComponent(params.domain)+"&redirect_uri=http://splashthat.com/?fbClose=1";window.open(href,"Facebook","width=400,height=250"),void 0!==window.ga&&window.ga("splash.send","event","Splash","SocialTrayFB","fb id:"+splash.server._event.id)}},fireLinkedInShare:function(title,description){null!=title&&""!=$.trim(title)||(title=splash.server._event.social.linkedin.name),null!=description&&""!=$.trim(description)||(description=splash.server._event.social.linkedin.description),title=$.trim(title),description=$.trim(description),""==title&&void 0!==splash.server._event.finetune&&(title=splash.server._event.finetune.social_defaults.linkedin.name),""==description&&void 0!==splash.server._event.finetune&&(description=splash.server._event.finetune.social_defaults.linkedin.description);var href="http://www.linkedin.com/shareArticle?mini=true&summary="+encodeURIComponent(description.substr(0,2e3))+"&title="+encodeURIComponent(title.substr(0,200))+"&url="+encodeURIComponent("http://"+splash.server._event.domain.effective);window.open(href,"Linkedin","width=520,height=570"),ga("splash.send","event","Splash","SocialTrayLI","li id:"+splash.server._event.id)},fireEmailSend:function(subject,body){null==subject&&(subject=""),null==body&&(body=""),""==$.trim(subject)&&void 0!==splash.server._event.finetune&&(subject=splash.server._event.finetune.social_defaults.email.subject),""==$.trim(body)&&void 0!==splash.server._event.finetune&&(body=splash.server._event.finetune.social_defaults.email.body);var href="mailto:?subject="+encodeURIComponent($.trim(subject))+"&body="+encodeURIComponent($.trim(body));window.location=href,ga("splash.send","event","Splash","SocialTrayEM","email id:"+splash.server._event.id)},fireMmsSend:function(caption){null==caption&&(caption=""),""==$.trim(caption)&&void 0!==splash.server._event.finetune&&(caption=splash.server._event.finetune.social_defaults.mms.caption),splash.socialActions.openPhoneInputModal(caption),ga("splash.send","event","Splash","SocialTrayEM","mms id:"+splash.server._event.id)},openPhoneInputModal:function(caption){var $body=$("body"),headers=$.extend({h1:"Enter a phone number",h2:""},headers),options={show:!0,fixed:!1,showNav:!1,destroyOnClose:!0,modalId:"phone-modal-instance",templateUrl:"/v2/js/splash/templates/modals/sui-modal-small-simple.hbs.html",header:headers,tabs:[{tabLabel:"Send MMS",tabContent:"<input id='mmsphone' type='tel'>",tabFunctionality:function($thisTab,$thisTabActions){SUI.createComponent("sui-text",{attachTo:$thisTab,id:"mmsphone",name:"mmsphone",currentValue:"",label:""}),setTimeout(function(){$("#mmsphone").find("input").attr("type","tel").attr("pattern","[0-9]*").focus()},.5)},actions:[{actionLabel:"Cancel",actionClasses:"f-l",actionAttributes:"outline-e",actionFunctionality:function($thisTab,$thisTabActions){$thisTab.parents(".sui-modal").find(".sui-btn-close").click()}},{actionLabel:"Send",actionClasses:"send",actionAttributes:"fill-a",actionFunctionality:function($thisTab,$thisTabActions){var phone=$("#mmsphone").find("input").val();$.ajax({url:splash.server.constants.splashAPIurl+"/events/"+splash.server.constants.event_id+"/mms",type:"post",data:JSON.stringify({phone:phone,caption:caption}),contentType:"application/json",dataType:"json",beforeSend:function(){$thisTab.parents(".sui-modal").find("button.send").html("Sending...")}}).done(function(response){$thisTab.parents(".sui-modal").find(".sui-btn-close").click(),SplashUI.notify("Your MMS was sent!")}).error(function(){$thisTab.parents(".sui-modal").find(".sui-btn-close").click(),SplashUI.notify("There was an error sending your MMS")})}}]}]};$body.SuiModal(options)},getFaceBookParams:function(name,description,picture){var params={},eventCardImages=splash.server._event.eventCardImages;return null!=name&&""!=$.trim(name)||(name=splash.server._event.social.facebook.name),null!=description&&""!=$.trim(description)||(description=splash.server._event.social.facebook.description),null!=picture&&""!=$.trim(picture)||(picture=splash.server._event.social.facebook.picture)||(picture=eventCardImages&&"object"==typeof eventCardImages?eventCardImages.x3:splash.server._event.image),params.name=$.trim(name),params.description=$.trim(description),params.picture=$.trim(picture),params.domain=splash.server._event.domain.effective,""==params.name&&void 0!==splash.server._event.finetune&&(params.name=splash.server._event.finetune.social_defaults.facebook.name),""==params.description&&void 0!==splash.server._event.finetune&&(params.description=splash.server._event.finetune.social_defaults.facebook.description),""==params.picture&&void 0!==splash.server._event.finetune&&(params.picture=splash.server._event.finetune.social_defaults.facebook.picture),0==params.picture.indexOf("//")?params.picture="http:"+params.picture:0!=params.picture.indexOf("http")&&(params.picture="http://splashthat.com"+params.picture),params}}}(jQuery);var navFunctions=function($){return{getLinkableSections:function(){return["speakers","schedule","sponsors","map","video"]},findSectionByHash:function(hash){return hash=hash.replace("#","").trim(),$("#splash-container").find(".sf."+hash+":first")}}}(jQuery);